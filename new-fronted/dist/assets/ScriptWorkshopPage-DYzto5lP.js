import{r as d,j as o,aj as $o,f as D,ak as zo,P as ke,c as we,e as tt,al as Ho,am as xt,d as xe,an as Mt,ao as Wt,u as Bo,a as _t,o as K,ap as Vo,i as B,aq as Xo,ar as le,as as ot,at as ft,au as mt,av as Yo,L as qe,I as Go,aw as Uo,af as se,k as qo,q as Lt,Q as Ft,ax as Jo,ay as Ko,az as Qo,aA as Zo,aB as es,aC as ts,a2 as os,a3 as ss,aD as $t,s as st,aE as rs,aa as ns,$ as zt,aF as as,aG as is,g as cs,ah as ls,aH as gt,aI as ds,aJ as ps,S as us,m as hs,aK as xs,aL as fs,p as yt}from"./index-yu4waMHZ.js";import{a as ms,h as gs,u as ys,P as bs,i as ws,R as vs,W as Ss,C as js,T as As,j as Ns,k as Ht,l as Bt,m as ks,O as Ps,n as Es,L as Cs,f as bt,s as wt}from"./scenes-4ITdBoBR.js";import{C as Ts,s as Rs}from"./ConfirmNovelNameDialog-nFbonFPb.js";var Is=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ds=Is.reduce((e,t)=>{const s=$o(`Primitive.${t}`),r=d.forwardRef((n,a)=>{const{asChild:i,...c}=n,l=i?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Os="Separator",vt="horizontal",Ms=["horizontal","vertical"],Vt=d.forwardRef((e,t)=>{const{decorative:s,orientation:r=vt,...n}=e,a=Ws(r)?r:vt,c=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(Ds.div,{"data-orientation":a,...c,...n,ref:t})});Vt.displayName=Os;function Ws(e){return Ms.includes(e)}var _s=Vt;function Ls({className:e,orientation:t="horizontal",decorative:s=!0,...r}){return o.jsx(_s,{"code-path":"src/components/ui/separator.tsx:15:5","data-slot":"separator",decorative:s,orientation:t,className:D("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function St({children:e,minWidth:t=280,maxWidth:s=480,defaultWidth:r=320,className:n,side:a="left",storageKey:i}){const[c,l]=d.useState(()=>{if(i&&typeof window<"u")try{const b=window.localStorage.getItem(i);if(b){const v=Number(b);if(!isNaN(v))return Math.min(Math.max(v,t),s)}}catch(b){console.error("Failed to load panel width",b)}return r}),[p,u]=d.useState(!1),h=d.useRef(null),m=d.useRef(0),x=d.useRef(0),f=d.useCallback(b=>{b.preventDefault(),u(!0),m.current=b.clientX,x.current=c},[c]),g=d.useCallback(b=>{if(!p)return;const v=a==="left"?b.clientX-m.current:m.current-b.clientX,j=Math.max(t,Math.min(s,x.current+v));l(j)},[p,t,s,a]),y=d.useCallback(()=>{if(u(!1),i&&typeof window<"u")try{window.localStorage.setItem(i,String(c))}catch(b){console.error("Failed to save panel width",b)}},[c,i]);return d.useEffect(()=>(p?(document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),document.body.style.cursor="col-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),document.body.style.cursor="",document.body.style.userSelect=""}),[p,g,y]),o.jsxs("div",{"code-path":"src/components/ui/ResizablePanel.tsx:96:5",ref:h,className:D("relative flex-shrink-0 h-full",n),style:{width:c},children:[o.jsx("div",{"code-path":"src/components/ui/ResizablePanel.tsx:101:7",className:"h-full overflow-hidden",children:e}),o.jsx("div",{"code-path":"src/components/ui/ResizablePanel.tsx:103:7",onMouseDown:f,className:D("absolute top-0 bottom-0 w-1 cursor-col-resize z-50","hover:bg-primary/50 transition-colors",a==="left"?"right-0":"left-0",p&&"bg-primary"),style:{transform:a==="left"?"translateX(50%)":"translateX(-50%)"},children:o.jsx("div",{"code-path":"src/components/ui/ResizablePanel.tsx:113:9",className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-0.5 h-8 bg-border rounded-full opacity-0 hover:opacity-100 transition-opacity"})})]})}const Fs=["top","right","bottom","left"],de=Math.min,X=Math.max,Ie=Math.round,Te=Math.floor,Z=e=>({x:e,y:e}),$s={left:"right",right:"left",bottom:"top",top:"bottom"},zs={start:"end",end:"start"};function Je(e,t,s){return X(e,de(t,s))}function re(e,t){return typeof e=="function"?e(t):e}function ne(e){return e.split("-")[0]}function ve(e){return e.split("-")[1]}function rt(e){return e==="x"?"y":"x"}function nt(e){return e==="y"?"height":"width"}const Hs=new Set(["top","bottom"]);function Q(e){return Hs.has(ne(e))?"y":"x"}function at(e){return rt(Q(e))}function Bs(e,t,s){s===void 0&&(s=!1);const r=ve(e),n=at(e),a=nt(n);let i=n==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=De(i)),[i,De(i)]}function Vs(e){const t=De(e);return[Ke(e),t,Ke(t)]}function Ke(e){return e.replace(/start|end/g,t=>zs[t])}const jt=["left","right"],At=["right","left"],Xs=["top","bottom"],Ys=["bottom","top"];function Gs(e,t,s){switch(e){case"top":case"bottom":return s?t?At:jt:t?jt:At;case"left":case"right":return t?Xs:Ys;default:return[]}}function Us(e,t,s,r){const n=ve(e);let a=Gs(ne(e),s==="start",r);return n&&(a=a.map(i=>i+"-"+n),t&&(a=a.concat(a.map(Ke)))),a}function De(e){return e.replace(/left|right|bottom|top/g,t=>$s[t])}function qs(e){return{top:0,right:0,bottom:0,left:0,...e}}function Xt(e){return typeof e!="number"?qs(e):{top:e,right:e,bottom:e,left:e}}function Oe(e){const{x:t,y:s,width:r,height:n}=e;return{width:r,height:n,top:s,left:t,right:t+r,bottom:s+n,x:t,y:s}}function Nt(e,t,s){let{reference:r,floating:n}=e;const a=Q(t),i=at(t),c=nt(i),l=ne(t),p=a==="y",u=r.x+r.width/2-n.width/2,h=r.y+r.height/2-n.height/2,m=r[c]/2-n[c]/2;let x;switch(l){case"top":x={x:u,y:r.y-n.height};break;case"bottom":x={x:u,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-n.width,y:h};break;default:x={x:r.x,y:r.y}}switch(ve(t)){case"start":x[i]-=m*(s&&p?-1:1);break;case"end":x[i]+=m*(s&&p?-1:1);break}return x}async function Js(e,t){var s;t===void 0&&(t={});const{x:r,y:n,platform:a,rects:i,elements:c,strategy:l}=e,{boundary:p="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:x=0}=re(t,e),f=Xt(x),y=c[m?h==="floating"?"reference":"floating":h],b=Oe(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(y)))==null||s?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:p,rootBoundary:u,strategy:l})),v=h==="floating"?{x:r,y:n,width:i.floating.width,height:i.floating.height}:i.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),S=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},A=Oe(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:v,offsetParent:j,strategy:l}):v);return{top:(b.top-A.top+f.top)/S.y,bottom:(A.bottom-b.bottom+f.bottom)/S.y,left:(b.left-A.left+f.left)/S.x,right:(A.right-b.right+f.right)/S.x}}const Ks=async(e,t,s)=>{const{placement:r="bottom",strategy:n="absolute",middleware:a=[],platform:i}=s,c=a.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let p=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:u,y:h}=Nt(p,r,l),m=r,x={},f=0;for(let y=0;y<c.length;y++){var g;const{name:b,fn:v}=c[y],{x:j,y:S,data:A,reset:k}=await v({x:u,y:h,initialPlacement:r,placement:m,strategy:n,middlewareData:x,rects:p,platform:{...i,detectOverflow:(g=i.detectOverflow)!=null?g:Js},elements:{reference:e,floating:t}});u=j??u,h=S??h,x={...x,[b]:{...x[b],...A}},k&&f<=50&&(f++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(p=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:n}):k.rects),{x:u,y:h}=Nt(p,m,l)),y=-1)}return{x:u,y:h,placement:m,strategy:n,middlewareData:x}},Qs=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:r,placement:n,rects:a,platform:i,elements:c,middlewareData:l}=t,{element:p,padding:u=0}=re(e,t)||{};if(p==null)return{};const h=Xt(u),m={x:s,y:r},x=at(n),f=nt(x),g=await i.getDimensions(p),y=x==="y",b=y?"top":"left",v=y?"bottom":"right",j=y?"clientHeight":"clientWidth",S=a.reference[f]+a.reference[x]-m[x]-a.floating[f],A=m[x]-a.reference[x],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(p));let E=k?k[j]:0;(!E||!await(i.isElement==null?void 0:i.isElement(k)))&&(E=c.floating[j]||a.floating[f]);const W=S/2-A/2,_=E/2-g[f]/2-1,L=de(h[b],_),$=de(h[v],_),H=L,M=E-g[f]-$,O=E/2-g[f]/2+W,w=Je(H,O,M),T=!l.arrow&&ve(n)!=null&&O!==w&&a.reference[f]/2-(O<H?L:$)-g[f]/2<0,R=T?O<H?O-H:O-M:0;return{[x]:m[x]+R,data:{[x]:w,centerOffset:O-w-R,...T&&{alignmentOffset:R}},reset:T}}}),Zs=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,r;const{placement:n,middlewareData:a,rects:i,initialPlacement:c,platform:l,elements:p}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0,...y}=re(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const b=ne(n),v=Q(c),j=ne(c)===c,S=await(l.isRTL==null?void 0:l.isRTL(p.floating)),A=m||(j||!g?[De(c)]:Vs(c)),k=f!=="none";!m&&k&&A.push(...Us(c,g,f,S));const E=[c,...A],W=await l.detectOverflow(t,y),_=[];let L=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&_.push(W[b]),h){const O=Bs(n,i,S);_.push(W[O[0]],W[O[1]])}if(L=[...L,{placement:n,overflows:_}],!_.every(O=>O<=0)){var $,H;const O=((($=a.flip)==null?void 0:$.index)||0)+1,w=E[O];if(w&&(!(h==="alignment"?v!==Q(w):!1)||L.every(N=>Q(N.placement)===v?N.overflows[0]>0:!0)))return{data:{index:O,overflows:L},reset:{placement:w}};let T=(H=L.filter(R=>R.overflows[0]<=0).sort((R,N)=>R.overflows[1]-N.overflows[1])[0])==null?void 0:H.placement;if(!T)switch(x){case"bestFit":{var M;const R=(M=L.filter(N=>{if(k){const C=Q(N.placement);return C===v||C==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(C=>C>0).reduce((C,P)=>C+P,0)]).sort((N,C)=>N[1]-C[1])[0])==null?void 0:M[0];R&&(T=R);break}case"initialPlacement":T=c;break}if(n!==T)return{reset:{placement:T}}}return{}}}};function kt(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Pt(e){return Fs.some(t=>e[t]>=0)}const er=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s,platform:r}=t,{strategy:n="referenceHidden",...a}=re(e,t);switch(n){case"referenceHidden":{const i=await r.detectOverflow(t,{...a,elementContext:"reference"}),c=kt(i,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Pt(c)}}}case"escaped":{const i=await r.detectOverflow(t,{...a,altBoundary:!0}),c=kt(i,s.floating);return{data:{escapedOffsets:c,escaped:Pt(c)}}}default:return{}}}}},Yt=new Set(["left","top"]);async function tr(e,t){const{placement:s,platform:r,elements:n}=e,a=await(r.isRTL==null?void 0:r.isRTL(n.floating)),i=ne(s),c=ve(s),l=Q(s)==="y",p=Yt.has(i)?-1:1,u=a&&l?-1:1,h=re(t,e);let{mainAxis:m,crossAxis:x,alignmentAxis:f}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof f=="number"&&(x=c==="end"?f*-1:f),l?{x:x*u,y:m*p}:{x:m*p,y:x*u}}const or=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,r;const{x:n,y:a,placement:i,middlewareData:c}=t,l=await tr(t,e);return i===((s=c.offset)==null?void 0:s.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:n+l.x,y:a+l.y,data:{...l,placement:i}}}}},sr=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:r,placement:n,platform:a}=t,{mainAxis:i=!0,crossAxis:c=!1,limiter:l={fn:b=>{let{x:v,y:j}=b;return{x:v,y:j}}},...p}=re(e,t),u={x:s,y:r},h=await a.detectOverflow(t,p),m=Q(ne(n)),x=rt(m);let f=u[x],g=u[m];if(i){const b=x==="y"?"top":"left",v=x==="y"?"bottom":"right",j=f+h[b],S=f-h[v];f=Je(j,f,S)}if(c){const b=m==="y"?"top":"left",v=m==="y"?"bottom":"right",j=g+h[b],S=g-h[v];g=Je(j,g,S)}const y=l.fn({...t,[x]:f,[m]:g});return{...y,data:{x:y.x-s,y:y.y-r,enabled:{[x]:i,[m]:c}}}}}},rr=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:r,placement:n,rects:a,middlewareData:i}=t,{offset:c=0,mainAxis:l=!0,crossAxis:p=!0}=re(e,t),u={x:s,y:r},h=Q(n),m=rt(h);let x=u[m],f=u[h];const g=re(c,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const j=m==="y"?"height":"width",S=a.reference[m]-a.floating[j]+y.mainAxis,A=a.reference[m]+a.reference[j]-y.mainAxis;x<S?x=S:x>A&&(x=A)}if(p){var b,v;const j=m==="y"?"width":"height",S=Yt.has(ne(n)),A=a.reference[h]-a.floating[j]+(S&&((b=i.offset)==null?void 0:b[h])||0)+(S?0:y.crossAxis),k=a.reference[h]+a.reference[j]+(S?0:((v=i.offset)==null?void 0:v[h])||0)-(S?y.crossAxis:0);f<A?f=A:f>k&&(f=k)}return{[m]:x,[h]:f}}}},nr=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,r;const{placement:n,rects:a,platform:i,elements:c}=t,{apply:l=()=>{},...p}=re(e,t),u=await i.detectOverflow(t,p),h=ne(n),m=ve(n),x=Q(n)==="y",{width:f,height:g}=a.floating;let y,b;h==="top"||h==="bottom"?(y=h,b=m===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(b=h,y=m==="end"?"top":"bottom");const v=g-u.top-u.bottom,j=f-u.left-u.right,S=de(g-u[y],v),A=de(f-u[b],j),k=!t.middlewareData.shift;let E=S,W=A;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(W=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=v),k&&!m){const L=X(u.left,0),$=X(u.right,0),H=X(u.top,0),M=X(u.bottom,0);x?W=f-2*(L!==0||$!==0?L+$:X(u.left,u.right)):E=g-2*(H!==0||M!==0?H+M:X(u.top,u.bottom))}await l({...t,availableWidth:W,availableHeight:E});const _=await i.getDimensions(c.floating);return f!==_.width||g!==_.height?{reset:{rects:!0}}:{}}}};function We(){return typeof window<"u"}function Se(e){return Gt(e)?(e.nodeName||"").toLowerCase():"#document"}function Y(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function te(e){var t;return(t=(Gt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Gt(e){return We()?e instanceof Node||e instanceof Y(e).Node:!1}function U(e){return We()?e instanceof Element||e instanceof Y(e).Element:!1}function ee(e){return We()?e instanceof HTMLElement||e instanceof Y(e).HTMLElement:!1}function Et(e){return!We()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Y(e).ShadowRoot}const ar=new Set(["inline","contents"]);function Pe(e){const{overflow:t,overflowX:s,overflowY:r,display:n}=q(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!ar.has(n)}const ir=new Set(["table","td","th"]);function cr(e){return ir.has(Se(e))}const lr=[":popover-open",":modal"];function _e(e){return lr.some(t=>{try{return e.matches(t)}catch{return!1}})}const dr=["transform","translate","scale","rotate","perspective"],pr=["transform","translate","scale","rotate","perspective","filter"],ur=["paint","layout","strict","content"];function it(e){const t=ct(),s=U(e)?q(e):e;return dr.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||pr.some(r=>(s.willChange||"").includes(r))||ur.some(r=>(s.contain||"").includes(r))}function hr(e){let t=pe(e);for(;ee(t)&&!ye(t);){if(it(t))return t;if(_e(t))return null;t=pe(t)}return null}function ct(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xr=new Set(["html","body","#document"]);function ye(e){return xr.has(Se(e))}function q(e){return Y(e).getComputedStyle(e)}function Le(e){return U(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function pe(e){if(Se(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Et(e)&&e.host||te(e);return Et(t)?t.host:t}function Ut(e){const t=pe(e);return ye(t)?e.ownerDocument?e.ownerDocument.body:e.body:ee(t)&&Pe(t)?t:Ut(t)}function Ae(e,t,s){var r;t===void 0&&(t=[]),s===void 0&&(s=!0);const n=Ut(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),i=Y(n);if(a){const c=Qe(i);return t.concat(i,i.visualViewport||[],Pe(n)?n:[],c&&s?Ae(c):[])}return t.concat(n,Ae(n,[],s))}function Qe(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qt(e){const t=q(e);let s=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const n=ee(e),a=n?e.offsetWidth:s,i=n?e.offsetHeight:r,c=Ie(s)!==a||Ie(r)!==i;return c&&(s=a,r=i),{width:s,height:r,$:c}}function lt(e){return U(e)?e:e.contextElement}function me(e){const t=lt(e);if(!ee(t))return Z(1);const s=t.getBoundingClientRect(),{width:r,height:n,$:a}=qt(t);let i=(a?Ie(s.width):s.width)/r,c=(a?Ie(s.height):s.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const fr=Z(0);function Jt(e){const t=Y(e);return!ct()||!t.visualViewport?fr:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mr(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Y(e)?!1:t}function fe(e,t,s,r){t===void 0&&(t=!1),s===void 0&&(s=!1);const n=e.getBoundingClientRect(),a=lt(e);let i=Z(1);t&&(r?U(r)&&(i=me(r)):i=me(e));const c=mr(a,s,r)?Jt(a):Z(0);let l=(n.left+c.x)/i.x,p=(n.top+c.y)/i.y,u=n.width/i.x,h=n.height/i.y;if(a){const m=Y(a),x=r&&U(r)?Y(r):r;let f=m,g=Qe(f);for(;g&&r&&x!==f;){const y=me(g),b=g.getBoundingClientRect(),v=q(g),j=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,S=b.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,p*=y.y,u*=y.x,h*=y.y,l+=j,p+=S,f=Y(g),g=Qe(f)}}return Oe({width:u,height:h,x:l,y:p})}function Fe(e,t){const s=Le(e).scrollLeft;return t?t.left+s:fe(te(e)).left+s}function Kt(e,t){const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-Fe(e,s),n=s.top+t.scrollTop;return{x:r,y:n}}function gr(e){let{elements:t,rect:s,offsetParent:r,strategy:n}=e;const a=n==="fixed",i=te(r),c=t?_e(t.floating):!1;if(r===i||c&&a)return s;let l={scrollLeft:0,scrollTop:0},p=Z(1);const u=Z(0),h=ee(r);if((h||!h&&!a)&&((Se(r)!=="body"||Pe(i))&&(l=Le(r)),ee(r))){const x=fe(r);p=me(r),u.x=x.x+r.clientLeft,u.y=x.y+r.clientTop}const m=i&&!h&&!a?Kt(i,l):Z(0);return{width:s.width*p.x,height:s.height*p.y,x:s.x*p.x-l.scrollLeft*p.x+u.x+m.x,y:s.y*p.y-l.scrollTop*p.y+u.y+m.y}}function yr(e){return Array.from(e.getClientRects())}function br(e){const t=te(e),s=Le(e),r=e.ownerDocument.body,n=X(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=X(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-s.scrollLeft+Fe(e);const c=-s.scrollTop;return q(r).direction==="rtl"&&(i+=X(t.clientWidth,r.clientWidth)-n),{width:n,height:a,x:i,y:c}}const Ct=25;function wr(e,t){const s=Y(e),r=te(e),n=s.visualViewport;let a=r.clientWidth,i=r.clientHeight,c=0,l=0;if(n){a=n.width,i=n.height;const u=ct();(!u||u&&t==="fixed")&&(c=n.offsetLeft,l=n.offsetTop)}const p=Fe(r);if(p<=0){const u=r.ownerDocument,h=u.body,m=getComputedStyle(h),x=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,f=Math.abs(r.clientWidth-h.clientWidth-x);f<=Ct&&(a-=f)}else p<=Ct&&(a+=p);return{width:a,height:i,x:c,y:l}}const vr=new Set(["absolute","fixed"]);function Sr(e,t){const s=fe(e,!0,t==="fixed"),r=s.top+e.clientTop,n=s.left+e.clientLeft,a=ee(e)?me(e):Z(1),i=e.clientWidth*a.x,c=e.clientHeight*a.y,l=n*a.x,p=r*a.y;return{width:i,height:c,x:l,y:p}}function Tt(e,t,s){let r;if(t==="viewport")r=wr(e,s);else if(t==="document")r=br(te(e));else if(U(t))r=Sr(t,s);else{const n=Jt(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Oe(r)}function Qt(e,t){const s=pe(e);return s===t||!U(s)||ye(s)?!1:q(s).position==="fixed"||Qt(s,t)}function jr(e,t){const s=t.get(e);if(s)return s;let r=Ae(e,[],!1).filter(c=>U(c)&&Se(c)!=="body"),n=null;const a=q(e).position==="fixed";let i=a?pe(e):e;for(;U(i)&&!ye(i);){const c=q(i),l=it(i);!l&&c.position==="fixed"&&(n=null),(a?!l&&!n:!l&&c.position==="static"&&!!n&&vr.has(n.position)||Pe(i)&&!l&&Qt(e,i))?r=r.filter(u=>u!==i):n=c,i=pe(i)}return t.set(e,r),r}function Ar(e){let{element:t,boundary:s,rootBoundary:r,strategy:n}=e;const i=[...s==="clippingAncestors"?_e(t)?[]:jr(t,this._c):[].concat(s),r],c=i[0],l=i.reduce((p,u)=>{const h=Tt(t,u,n);return p.top=X(h.top,p.top),p.right=de(h.right,p.right),p.bottom=de(h.bottom,p.bottom),p.left=X(h.left,p.left),p},Tt(t,c,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Nr(e){const{width:t,height:s}=qt(e);return{width:t,height:s}}function kr(e,t,s){const r=ee(t),n=te(t),a=s==="fixed",i=fe(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const l=Z(0);function p(){l.x=Fe(n)}if(r||!r&&!a)if((Se(t)!=="body"||Pe(n))&&(c=Le(t)),r){const x=fe(t,!0,a,t);l.x=x.x+t.clientLeft,l.y=x.y+t.clientTop}else n&&p();a&&!r&&n&&p();const u=n&&!r&&!a?Kt(n,c):Z(0),h=i.left+c.scrollLeft-l.x-u.x,m=i.top+c.scrollTop-l.y-u.y;return{x:h,y:m,width:i.width,height:i.height}}function Ge(e){return q(e).position==="static"}function Rt(e,t){if(!ee(e)||q(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return te(e)===s&&(s=s.ownerDocument.body),s}function Zt(e,t){const s=Y(e);if(_e(e))return s;if(!ee(e)){let n=pe(e);for(;n&&!ye(n);){if(U(n)&&!Ge(n))return n;n=pe(n)}return s}let r=Rt(e,t);for(;r&&cr(r)&&Ge(r);)r=Rt(r,t);return r&&ye(r)&&Ge(r)&&!it(r)?s:r||hr(e)||s}const Pr=async function(e){const t=this.getOffsetParent||Zt,s=this.getDimensions,r=await s(e.floating);return{reference:kr(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Er(e){return q(e).direction==="rtl"}const Cr={convertOffsetParentRelativeRectToViewportRelativeRect:gr,getDocumentElement:te,getClippingRect:Ar,getOffsetParent:Zt,getElementRects:Pr,getClientRects:yr,getDimensions:Nr,getScale:me,isElement:U,isRTL:Er};function eo(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Tr(e,t){let s=null,r;const n=te(e);function a(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),a();const p=e.getBoundingClientRect(),{left:u,top:h,width:m,height:x}=p;if(c||t(),!m||!x)return;const f=Te(h),g=Te(n.clientWidth-(u+m)),y=Te(n.clientHeight-(h+x)),b=Te(u),j={rootMargin:-f+"px "+-g+"px "+-y+"px "+-b+"px",threshold:X(0,de(1,l))||1};let S=!0;function A(k){const E=k[0].intersectionRatio;if(E!==l){if(!S)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!eo(p,e.getBoundingClientRect())&&i(),S=!1}try{s=new IntersectionObserver(A,{...j,root:n.ownerDocument})}catch{s=new IntersectionObserver(A,j)}s.observe(e)}return i(!0),a}function Rr(e,t,s,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,p=lt(e),u=n||a?[...p?Ae(p):[],...Ae(t)]:[];u.forEach(b=>{n&&b.addEventListener("scroll",s,{passive:!0}),a&&b.addEventListener("resize",s)});const h=p&&c?Tr(p,s):null;let m=-1,x=null;i&&(x=new ResizeObserver(b=>{let[v]=b;v&&v.target===p&&x&&(x.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=x)==null||j.observe(t)})),s()}),p&&!l&&x.observe(p),x.observe(t));let f,g=l?fe(e):null;l&&y();function y(){const b=fe(e);g&&!eo(g,b)&&s(),g=b,f=requestAnimationFrame(y)}return s(),()=>{var b;u.forEach(v=>{n&&v.removeEventListener("scroll",s),a&&v.removeEventListener("resize",s)}),h?.(),(b=x)==null||b.disconnect(),x=null,l&&cancelAnimationFrame(f)}}const Ir=or,Dr=sr,Or=Zs,Mr=nr,Wr=er,It=Qs,_r=rr,Lr=(e,t,s)=>{const r=new Map,n={platform:Cr,...s},a={...n.platform,_c:r};return Ks(e,t,{...n,platform:a})};var Fr=typeof document<"u",$r=function(){},Re=Fr?d.useLayoutEffect:$r;function Me(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,r,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(r=s;r--!==0;)if(!Me(e[r],t[r]))return!1;return!0}if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(t,n[r]))return!1;for(r=s;r--!==0;){const a=n[r];if(!(a==="_owner"&&e.$$typeof)&&!Me(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function to(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Dt(e,t){const s=to(e);return Math.round(t*s)/s}function Ue(e){const t=d.useRef(e);return Re(()=>{t.current=e}),t}function zr(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:n,elements:{reference:a,floating:i}={},transform:c=!0,whileElementsMounted:l,open:p}=e,[u,h]=d.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[m,x]=d.useState(r);Me(m,r)||x(r);const[f,g]=d.useState(null),[y,b]=d.useState(null),v=d.useCallback(N=>{N!==k.current&&(k.current=N,g(N))},[]),j=d.useCallback(N=>{N!==E.current&&(E.current=N,b(N))},[]),S=a||f,A=i||y,k=d.useRef(null),E=d.useRef(null),W=d.useRef(u),_=l!=null,L=Ue(l),$=Ue(n),H=Ue(p),M=d.useCallback(()=>{if(!k.current||!E.current)return;const N={placement:t,strategy:s,middleware:m};$.current&&(N.platform=$.current),Lr(k.current,E.current,N).then(C=>{const P={...C,isPositioned:H.current!==!1};O.current&&!Me(W.current,P)&&(W.current=P,zo.flushSync(()=>{h(P)}))})},[m,t,s,$,H]);Re(()=>{p===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,h(N=>({...N,isPositioned:!1})))},[p]);const O=d.useRef(!1);Re(()=>(O.current=!0,()=>{O.current=!1}),[]),Re(()=>{if(S&&(k.current=S),A&&(E.current=A),S&&A){if(L.current)return L.current(S,A,M);M()}},[S,A,M,L,_]);const w=d.useMemo(()=>({reference:k,floating:E,setReference:v,setFloating:j}),[v,j]),T=d.useMemo(()=>({reference:S,floating:A}),[S,A]),R=d.useMemo(()=>{const N={position:s,left:0,top:0};if(!T.floating)return N;const C=Dt(T.floating,u.x),P=Dt(T.floating,u.y);return c?{...N,transform:"translate("+C+"px, "+P+"px)",...to(T.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:C,top:P}},[s,c,T.floating,u.x,u.y]);return d.useMemo(()=>({...u,update:M,refs:w,elements:T,floatingStyles:R}),[u,M,w,T,R])}const Hr=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:r,padding:n}=typeof e=="function"?e(s):e;return r&&t(r)?r.current!=null?It({element:r.current,padding:n}).fn(s):{}:r?It({element:r,padding:n}).fn(s):{}}}},Br=(e,t)=>({...Ir(e),options:[e,t]}),Vr=(e,t)=>({...Dr(e),options:[e,t]}),Xr=(e,t)=>({..._r(e),options:[e,t]}),Yr=(e,t)=>({...Or(e),options:[e,t]}),Gr=(e,t)=>({...Mr(e),options:[e,t]}),Ur=(e,t)=>({...Wr(e),options:[e,t]}),qr=(e,t)=>({...Hr(e),options:[e,t]});var Jr="Arrow",oo=d.forwardRef((e,t)=>{const{children:s,width:r=10,height:n=5,...a}=e;return o.jsx(ke.svg,{...a,ref:t,width:r,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});oo.displayName=Jr;var Kr=oo,dt="Popper",[so,ro]=tt(dt),[Qr,no]=so(dt),ao=e=>{const{__scopePopper:t,children:s}=e,[r,n]=d.useState(null);return o.jsx(Qr,{scope:t,anchor:r,onAnchorChange:n,children:s})};ao.displayName=dt;var io="PopperAnchor",co=d.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:r,...n}=e,a=no(io,s),i=d.useRef(null),c=we(t,i),l=d.useRef(null);return d.useEffect(()=>{const p=l.current;l.current=r?.current||i.current,p!==l.current&&a.onAnchorChange(l.current)}),r?null:o.jsx(ke.div,{...n,ref:c})});co.displayName=io;var pt="PopperContent",[Zr,en]=so(pt),lo=d.forwardRef((e,t)=>{const{__scopePopper:s,side:r="bottom",sideOffset:n=0,align:a="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:p=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:f,...g}=e,y=no(pt,s),[b,v]=d.useState(null),j=we(t,oe=>v(oe)),[S,A]=d.useState(null),k=ms(S),E=k?.width??0,W=k?.height??0,_=r+(a!=="center"?"-"+a:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},$=Array.isArray(p)?p:[p],H=$.length>0,M={padding:L,boundary:$.filter(on),altBoundary:H},{refs:O,floatingStyles:w,placement:T,isPositioned:R,middlewareData:N}=zr({strategy:"fixed",placement:_,whileElementsMounted:(...oe)=>Rr(...oe,{animationFrame:x==="always"}),elements:{reference:y.anchor},middleware:[Br({mainAxis:n+W,alignmentAxis:i}),l&&Vr({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Xr():void 0,...M}),l&&Yr({...M}),Gr({...M,apply:({elements:oe,rects:Ce,availableWidth:He,availableHeight:Be})=>{const{width:Ve,height:Xe}=Ce.reference,J=oe.floating.style;J.setProperty("--radix-popper-available-width",`${He}px`),J.setProperty("--radix-popper-available-height",`${Be}px`),J.setProperty("--radix-popper-anchor-width",`${Ve}px`),J.setProperty("--radix-popper-anchor-height",`${Xe}px`)}}),S&&qr({element:S,padding:c}),sn({arrowWidth:E,arrowHeight:W}),m&&Ur({strategy:"referenceHidden",...M})]}),[C,P]=ho(T),F=Ho(f);xt(()=>{R&&F?.()},[R,F]);const V=N.arrow?.x,G=N.arrow?.y,ue=N.arrow?.centerOffset!==0,[je,he]=d.useState();return xt(()=>{b&&he(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...w,transform:R?w.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(Zr,{scope:s,placedSide:C,onArrowChange:A,arrowX:V,arrowY:G,shouldHideArrow:ue,children:o.jsx(ke.div,{"data-side":C,"data-align":P,...g,ref:j,style:{...g.style,animation:R?void 0:"none"}})})})});lo.displayName=pt;var po="PopperArrow",tn={top:"bottom",right:"left",bottom:"top",left:"right"},uo=d.forwardRef(function(t,s){const{__scopePopper:r,...n}=t,a=en(po,r),i=tn[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(Kr,{...n,ref:s,style:{...n.style,display:"block"}})})});uo.displayName=po;function on(e){return e!==null}var sn=e=>({name:"transformOrigin",options:e,fn(t){const{placement:s,rects:r,middlewareData:n}=t,i=n.arrow?.centerOffset!==0,c=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[p,u]=ho(s),h={start:"0%",center:"50%",end:"100%"}[u],m=(n.arrow?.x??0)+c/2,x=(n.arrow?.y??0)+l/2;let f="",g="";return p==="bottom"?(f=i?h:`${m}px`,g=`${-l}px`):p==="top"?(f=i?h:`${m}px`,g=`${r.floating.height+l}px`):p==="right"?(f=`${-l}px`,g=i?h:`${x}px`):p==="left"&&(f=`${r.floating.width+l}px`,g=i?h:`${x}px`),{data:{x:f,y:g}}}});function ho(e){const[t,s="center"]=e.split("-");return[t,s]}var rn=ao,nn=co,an=lo,cn=uo,ln=Symbol("radix.slottable");function dn(e){const t=({children:s})=>o.jsx(o.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=ln,t}var pn=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),un="VisuallyHidden",xo=d.forwardRef((e,t)=>o.jsx(ke.span,{...e,ref:t,style:{...pn,...e.style}}));xo.displayName=un;var hn=xo,[$e]=tt("Tooltip",[ro]),ze=ro(),fo="TooltipProvider",xn=700,Ze="tooltip.open",[fn,ut]=$e(fo),mo=e=>{const{__scopeTooltip:t,delayDuration:s=xn,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:a}=e,i=d.useRef(!0),c=d.useRef(!1),l=d.useRef(0);return d.useEffect(()=>{const p=l.current;return()=>window.clearTimeout(p)},[]),o.jsx(fn,{scope:t,isOpenDelayedRef:i,delayDuration:s,onOpen:d.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:d.useCallback(p=>{c.current=p},[]),disableHoverableContent:n,children:a})};mo.displayName=fo;var Ne="Tooltip",[mn,Ee]=$e(Ne),go=e=>{const{__scopeTooltip:t,children:s,open:r,defaultOpen:n,onOpenChange:a,disableHoverableContent:i,delayDuration:c}=e,l=ut(Ne,e.__scopeTooltip),p=ze(t),[u,h]=d.useState(null),m=gs(),x=d.useRef(0),f=i??l.disableHoverableContent,g=c??l.delayDuration,y=d.useRef(!1),[b,v]=ys({prop:r,defaultProp:n??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(Ze))):l.onClose(),a?.(E)},caller:Ne}),j=d.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),S=d.useCallback(()=>{window.clearTimeout(x.current),x.current=0,y.current=!1,v(!0)},[v]),A=d.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v(!1)},[v]),k=d.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{y.current=!0,v(!0),x.current=0},g)},[g,v]);return d.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),o.jsx(rn,{...p,children:o.jsx(mn,{scope:t,contentId:m,open:b,stateAttribute:j,trigger:u,onTriggerChange:h,onTriggerEnter:d.useCallback(()=>{l.isOpenDelayedRef.current?k():S()},[l.isOpenDelayedRef,k,S]),onTriggerLeave:d.useCallback(()=>{f?A():(window.clearTimeout(x.current),x.current=0)},[A,f]),onOpen:S,onClose:A,disableHoverableContent:f,children:s})})};go.displayName=Ne;var et="TooltipTrigger",yo=d.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,n=Ee(et,s),a=ut(et,s),i=ze(s),c=d.useRef(null),l=we(t,c,n.onTriggerChange),p=d.useRef(!1),u=d.useRef(!1),h=d.useCallback(()=>p.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(nn,{asChild:!0,...i,children:o.jsx(ke.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:l,onPointerMove:xe(e.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:xe(e.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:xe(e.onPointerDown,()=>{n.open&&n.onClose(),p.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:xe(e.onFocus,()=>{p.current||n.onOpen()}),onBlur:xe(e.onBlur,n.onClose),onClick:xe(e.onClick,n.onClose)})})});yo.displayName=et;var ht="TooltipPortal",[gn,yn]=$e(ht,{forceMount:void 0}),bo=e=>{const{__scopeTooltip:t,forceMount:s,children:r,container:n}=e,a=Ee(ht,t);return o.jsx(gn,{scope:t,forceMount:s,children:o.jsx(Mt,{present:s||a.open,children:o.jsx(bs,{asChild:!0,container:n,children:r})})})};bo.displayName=ht;var be="TooltipContent",wo=d.forwardRef((e,t)=>{const s=yn(be,e.__scopeTooltip),{forceMount:r=s.forceMount,side:n="top",...a}=e,i=Ee(be,e.__scopeTooltip);return o.jsx(Mt,{present:r||i.open,children:i.disableHoverableContent?o.jsx(vo,{side:n,...a,ref:t}):o.jsx(bn,{side:n,...a,ref:t})})}),bn=d.forwardRef((e,t)=>{const s=Ee(be,e.__scopeTooltip),r=ut(be,e.__scopeTooltip),n=d.useRef(null),a=we(t,n),[i,c]=d.useState(null),{trigger:l,onClose:p}=s,u=n.current,{onPointerInTransitChange:h}=r,m=d.useCallback(()=>{c(null),h(!1)},[h]),x=d.useCallback((f,g)=>{const y=f.currentTarget,b={x:f.clientX,y:f.clientY},v=jn(b,y.getBoundingClientRect()),j=An(b,v),S=Nn(g.getBoundingClientRect()),A=Pn([...j,...S]);c(A),h(!0)},[h]);return d.useEffect(()=>()=>m(),[m]),d.useEffect(()=>{if(l&&u){const f=y=>x(y,u),g=y=>x(y,l);return l.addEventListener("pointerleave",f),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",f),u.removeEventListener("pointerleave",g)}}},[l,u,x,m]),d.useEffect(()=>{if(i){const f=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},v=l?.contains(y)||u?.contains(y),j=!kn(b,i);v?m():j&&(m(),p())};return document.addEventListener("pointermove",f),()=>document.removeEventListener("pointermove",f)}},[l,u,i,p,m]),o.jsx(vo,{...e,ref:a})}),[wn,vn]=$e(Ne,{isInside:!1}),Sn=dn("TooltipContent"),vo=d.forwardRef((e,t)=>{const{__scopeTooltip:s,children:r,"aria-label":n,onEscapeKeyDown:a,onPointerDownOutside:i,...c}=e,l=Ee(be,s),p=ze(s),{onClose:u}=l;return d.useEffect(()=>(document.addEventListener(Ze,u),()=>document.removeEventListener(Ze,u)),[u]),d.useEffect(()=>{if(l.trigger){const h=m=>{m.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),o.jsx(ws,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:o.jsxs(an,{"data-state":l.stateAttribute,...p,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(Sn,{children:r}),o.jsx(wn,{scope:s,isInside:!0,children:o.jsx(hn,{id:l.contentId,role:"tooltip",children:n||r})})]})})});wo.displayName=be;var So="TooltipArrow",jo=d.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,n=ze(s);return vn(So,s).isInside?null:o.jsx(cn,{...n,...r,ref:t})});jo.displayName=So;function jn(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,r,n,a)){case a:return"left";case n:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function An(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return r}function Nn(e){const{top:t,right:s,bottom:r,left:n}=e;return[{x:n,y:t},{x:s,y:t},{x:s,y:r},{x:n,y:r}]}function kn(e,t){const{x:s,y:r}=e;let n=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const c=t[a],l=t[i],p=c.x,u=c.y,h=l.x,m=l.y;u>r!=m>r&&s<(h-p)*(r-u)/(m-u)+p&&(n=!n)}return n}function Pn(e){const t=e.slice();return t.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),En(t)}function En(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const n=e[r];for(;s.length>=2;){const a=s[s.length-1],i=s[s.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))s.pop();else break}s.push(n)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var Cn=mo,Tn=go,Rn=yo,In=bo,Dn=wo,On=jo;function Ao({delayDuration:e=0,...t}){return o.jsx(Cn,{"code-path":"src/components/ui/tooltip.tsx:13:5","data-slot":"tooltip-provider",delayDuration:e,...t})}function Mn({...e}){return o.jsx(Ao,{"code-path":"src/components/ui/tooltip.tsx:25:5",children:o.jsx(Tn,{"code-path":"src/components/ui/tooltip.tsx:26:7","data-slot":"tooltip",...e})})}function Wn({...e}){return o.jsx(Rn,{"code-path":"src/components/ui/tooltip.tsx:34:10","data-slot":"tooltip-trigger",...e})}function _n({className:e,sideOffset:t=0,children:s,...r}){return o.jsx(In,{"code-path":"src/components/ui/tooltip.tsx:44:5",children:o.jsxs(Dn,{"code-path":"src/components/ui/tooltip.tsx:45:7","data-slot":"tooltip-content",sideOffset:t,className:D("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[s,o.jsx(On,{"code-path":"src/components/ui/tooltip.tsx:55:9",className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var Ln=Symbol("radix.slottable");function Fn(e){const t=({children:s})=>o.jsx(o.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=Ln,t}var No="AlertDialog",[$n]=tt(No,[Bt]),ae=Bt(),ko=e=>{const{__scopeAlertDialog:t,...s}=e,r=ae(t);return o.jsx(vs,{...r,...s,modal:!0})};ko.displayName=No;var zn="AlertDialogTrigger",Hn=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,n=ae(s);return o.jsx(Es,{...n,...r,ref:t})});Hn.displayName=zn;var Bn="AlertDialogPortal",Po=e=>{const{__scopeAlertDialog:t,...s}=e,r=ae(t);return o.jsx(ks,{...r,...s})};Po.displayName=Bn;var Vn="AlertDialogOverlay",Eo=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,n=ae(s);return o.jsx(Ps,{...n,...r,ref:t})});Eo.displayName=Vn;var ge="AlertDialogContent",[Xn,Yn]=$n(ge),Gn=Fn("AlertDialogContent"),Co=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,children:r,...n}=e,a=ae(s),i=d.useRef(null),c=we(t,i),l=d.useRef(null);return o.jsx(Ss,{contentName:ge,titleName:To,docsSlug:"alert-dialog",children:o.jsx(Xn,{scope:s,cancelRef:l,children:o.jsxs(js,{role:"alertdialog",...a,...n,ref:c,onOpenAutoFocus:xe(n.onOpenAutoFocus,p=>{p.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[o.jsx(Gn,{children:r}),o.jsx(qn,{contentRef:i})]})})})});Co.displayName=ge;var To="AlertDialogTitle",Ro=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,n=ae(s);return o.jsx(As,{...n,...r,ref:t})});Ro.displayName=To;var Io="AlertDialogDescription",Do=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,n=ae(s);return o.jsx(Ns,{...n,...r,ref:t})});Do.displayName=Io;var Un="AlertDialogAction",Oo=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,n=ae(s);return o.jsx(Ht,{...n,...r,ref:t})});Oo.displayName=Un;var Mo="AlertDialogCancel",Wo=d.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,{cancelRef:n}=Yn(Mo,s),a=ae(s),i=we(t,n);return o.jsx(Ht,{...a,...r,ref:i})});Wo.displayName=Mo;var qn=({contentRef:e})=>{const t=`\`${ge}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ge}\` by passing a \`${Io}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ge}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Jn=ko,Kn=Po,Qn=Eo,Zn=Co,ea=Oo,ta=Wo,oa=Ro,sa=Do;function ra({...e}){return o.jsx(Jn,{"code-path":"src/components/ui/alert-dialog.tsx:10:10","data-slot":"alert-dialog",...e})}function na({...e}){return o.jsx(Kn,{"code-path":"src/components/ui/alert-dialog.tsx:25:5","data-slot":"alert-dialog-portal",...e})}function aa({className:e,...t}){return o.jsx(Qn,{"code-path":"src/components/ui/alert-dialog.tsx:34:5","data-slot":"alert-dialog-overlay",className:D("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function ia({className:e,...t}){return o.jsxs(na,{"code-path":"src/components/ui/alert-dialog.tsx:50:5",children:[o.jsx(aa,{"code-path":"src/components/ui/alert-dialog.tsx:51:7"}),o.jsx(Zn,{"code-path":"src/components/ui/alert-dialog.tsx:52:7","data-slot":"alert-dialog-content",className:D("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function ca({className:e,...t}){return o.jsx("div",{"code-path":"src/components/ui/alert-dialog.tsx:69:5","data-slot":"alert-dialog-header",className:D("flex flex-col gap-2 text-center sm:text-left",e),...t})}function la({className:e,...t}){return o.jsx("div",{"code-path":"src/components/ui/alert-dialog.tsx:82:5","data-slot":"alert-dialog-footer",className:D("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function da({className:e,...t}){return o.jsx(oa,{"code-path":"src/components/ui/alert-dialog.tsx:98:5","data-slot":"alert-dialog-title",className:D("text-lg font-semibold",e),...t})}function pa({className:e,...t}){return o.jsx(sa,{"code-path":"src/components/ui/alert-dialog.tsx:111:5","data-slot":"alert-dialog-description",className:D("text-muted-foreground text-sm",e),...t})}function ua({className:e,...t}){return o.jsx(ea,{"code-path":"src/components/ui/alert-dialog.tsx:124:5",className:D(Wt(),e),...t})}function ha({className:e,...t}){return o.jsx(ta,{"code-path":"src/components/ui/alert-dialog.tsx:136:5",className:D(Wt({variant:"outline"}),e),...t})}function Ot(e){if(!e)return"";let t=e;if(typeof t=="string"&&t.trim().startsWith("[")&&t.trim().endsWith("]"))try{let s=t;t.includes("'")&&!t.includes('"type"')&&(s=t.replace(/'/g,'"'));const r=JSON.parse(s);Array.isArray(r)&&(t=r.map(a=>typeof a=="string"?a:a&&typeof a=="object"?a.text||a.content||JSON.stringify(a):"").join(""))}catch{const r=t.match(/"text"\s*:\s*"([^"]+)"/g);r&&(t=r.map(a=>{const i=a.match(/"text"\s*:\s*"([^"]+)"/);return i?i[1]:""}).join(""))}return t=t.replace(/\[\s*\{\s*"(label|genre|style)"[\s\S]*?\}\s*\]/g,""),t}function xa({projectId:e,sceneContext:t}){const[s,r]=d.useState(""),[n,a]=d.useState([]),[i,c]=d.useState(!1),[l,p]=d.useState(""),[u,h]=d.useState("AI Ê≠£Âú®ÊÄùËÄÉ‰∏≠..."),[m,x]=d.useState(!1),f=d.useRef(null),g=d.useRef(null),y=d.useRef(null),b=d.useRef([]),[v,j]=d.useState(null),{currentEpisode:S,currentProject:A}=Bo(),k=_t(w=>w.addToast),E=e||A?.id||K.getTempProjectId();d.useEffect(()=>{b.current=n},[n]),d.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[n,l]),d.useEffect(()=>{let w=!1,T=!1;return(async()=>{if(T){console.log("[AIAssistantPanel] Already initialized, skipping");return}T=!0;const N=e||A?.id||K.getTempProjectId();if(!N){console.log("[AIAssistantPanel] No project ID available, skipping init");return}console.log("[AIAssistantPanel] Initializing chat for project:",N);try{const{messages:C,threadId:P}=await K.recoverChatHistory(N);if(w)return;if(P&&j(P),P&&C.length>0){console.log("[AIAssistantPanel] Recovered chat history:",C.length,"messages","threadId:",P);const F=G=>{const ue=G.content.toLowerCase().trim();return!!(G.role==="user"&&["‰Ω†Â•ΩÔºåÂºÄÂßãÂàõ‰Ωú","ÂºÄÂßãÂàõ‰Ωú","‰Ω†Â•ΩÔºåÂºÄÂßã"].some(he=>ue.includes(he.toLowerCase())))},V=C.filter(G=>!F(G));if(V.length>0){console.log("[AIAssistantPanel] Setting",V.length,"filtered messages to state"),a(V.map(G=>({...G,timestamp:new Date(G.timestamp)})));return}}if(P&&C.length===0){console.log("[AIAssistantPanel] Thread exists but no messages, checking if init needed"),await new Promise(V=>setTimeout(V,500));const F=await K.recoverChatHistory(N);if(F.messages.length>0){console.log("[AIAssistantPanel] Retry successful, recovered",F.messages.length,"messages"),a(F.messages.map(V=>({...V,timestamp:new Date(V.timestamp)})));return}}}catch(C){console.error("[AIAssistantPanel] Failed to recover chat history:",C)}w||(console.log("[AIAssistantPanel] No valid history found, sending init message"),await W(N))})(),()=>{w=!0,g.current&&(g.current(),g.current=null)}},[]);const W=async w=>{c(!0),h("üöÄ Ê≠£Âú®ËøûÊé• AI Âä©Êâã...");const T=t?`‰Ω†Â•ΩÔºåÂºÄÂßãÂàõ‰ΩúÂú∫ÊôØ ${t.number}Ôºö${t.location}`:"‰Ω†Â•ΩÔºåÂºÄÂßãÂàõ‰Ωú";let R="",N=null;try{const C=await K.streamMessage(T,{onNodeStart:(P,F)=>{F&&h(F)},onStatus:P=>{h(P)},onMessage:P=>{R=P.content,P.ui_interaction&&(N=P.ui_interaction),p(R)},onComplete:()=>{if(console.log("[AIAssistantPanel] Init complete, content length:",R.length),R){const P={id:`ai-${Date.now()}`,role:"assistant",content:R,timestamp:new Date,ui_interaction:N};a(F=>[...F,P])}p(""),c(!1),g.current=null},onError:P=>{console.error("[AIAssistantPanel] Init message error:",P),p(""),c(!1),k({type:"error",message:"ËøûÊé• AI Â§±Ë¥•ÔºåËØ∑ÈáçËØï"})}},w);g.current=C}catch(C){console.error("[AIAssistantPanel] Failed to send init message:",C),c(!1),k({type:"error",message:"ËøûÊé• AI Â§±Ë¥•ÔºåËØ∑ÈáçËØï"})}},_=d.useCallback(async()=>{if(!s.trim()||i)return;const w={id:`user-${Date.now()}`,role:"user",content:s,timestamp:new Date};a(C=>[...C,w]),r(""),c(!0),p(""),h("AI Ê≠£Âú®ÊÄùËÄÉ‰∏≠...");let T="",R;const N=e||A?.id||K.getTempProjectId();try{const C=await K.streamMessage(w.content,{onNodeStart:(P,F)=>{F&&h(F)},onStatus:P=>{h(P)},onMessage:P=>{T=P.content,P.ui_interaction&&(R=P.ui_interaction),p(T)},onComplete:()=>{if(console.log("[AIAssistantPanel] Message complete, content length:",T.length),T){const P={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:T,timestamp:new Date,ui_interaction:R};a(F=>[...F,P])}p(""),c(!1),g.current=null},onError:P=>{console.error("[AIAssistantPanel] Message error:",P),a(F=>[...F,{id:`error-${Date.now()}`,role:"assistant",content:`Êä±Ê≠âÔºåÂèëÁîü‰∫ÜÈîôËØØÔºö${P}`,timestamp:new Date}]),p(""),c(!1)}},N??void 0,S?.id??t?.id);g.current=C}catch(C){console.error("[AIAssistantPanel] Send message error:",C),a(P=>[...P,{id:`error-${Date.now()}`,role:"assistant",content:`Êä±Ê≠âÔºåËØ∑Ê±ÇÂ§±Ë¥•Ôºö${C}`,timestamp:new Date}]),c(!1)}},[s,i,e,A?.id,S?.id,t?.id]),L=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),_())},$=[{label:"Áª≠ÂÜô‰∏ãÊñá",icon:o.jsx(se,{"code-path":"src/components/ai/AIAssistantPanel.tsx:371:28",size:12}),prompt:"Áª≠ÂÜôÂΩìÂâçÂú∫ÊôØÁöÑÂêéÁª≠ÂÜÖÂÆπ"},{label:"Êâ©ÂÜôÂú∫ÊôØ",icon:o.jsx(se,{"code-path":"src/components/ai/AIAssistantPanel.tsx:372:28",size:12}),prompt:"Êâ©ÂÜôÂΩìÂâçÂú∫ÊôØÁöÑÊèèËø∞ÂíåÁªÜËäÇ"},{label:"Ê∂¶Ëâ≤ÂØπÁôΩ",icon:o.jsx(se,{"code-path":"src/components/ai/AIAssistantPanel.tsx:373:28",size:12}),prompt:"Ê∂¶Ëâ≤Âú∫ÊôØ‰∏≠ÁöÑÂØπÁôΩ"},{label:"ÁîüÊàêÂàÜÈïú",icon:o.jsx(se,{"code-path":"src/components/ai/AIAssistantPanel.tsx:374:28",size:12}),prompt:"‰∏∫ÂΩìÂâçÂú∫ÊôØÁîüÊàêÂàÜÈïúÊñπÊ°à"}],H=w=>{r(w),setTimeout(()=>_(),100)},M=()=>{x(!0)},O=async()=>{const w=A?.id||K.getTempProjectId();w&&K.clearThreadId(w),g.current&&(g.current(),g.current=null),a([]),p(""),c(!1),y.current=null,x(!1),k({type:"success",message:"‰ºöËØùÂ∑≤ÈáçÁΩÆ"}),w&&await W(w)};return o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:413:5",className:"w-full h-full flex flex-col bg-surface border-l border-border",children:[o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:415:7",className:"flex items-center justify-between px-3 sm:px-4 py-3 border-b border-border shrink-0",children:[o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:416:9",className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:417:11",className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-primary flex items-center justify-center",children:o.jsx(Vo,{"code-path":"src/components/ai/AIAssistantPanel.tsx:418:13",size:16,className:"sm:w-[18px] sm:h-[18px] text-primary-foreground"})}),o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:420:11",children:[o.jsx("p",{"code-path":"src/components/ai/AIAssistantPanel.tsx:421:13",className:"font-medium text-xs sm:text-sm",children:"AI Âàõ‰ΩúÂä©Êâã"}),o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:422:13",className:"flex items-center gap-1.5",children:[o.jsx("span",{"code-path":"src/components/ai/AIAssistantPanel.tsx:423:15",className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-green-500 animate-pulse"}),o.jsx("span",{"code-path":"src/components/ai/AIAssistantPanel.tsx:424:15",className:"text-[10px] sm:text-xs text-text-tertiary",children:"Âú®Á∫ø"})]})]})]}),o.jsx(Ao,{"code-path":"src/components/ai/AIAssistantPanel.tsx:428:9",delayDuration:300,children:o.jsxs(Mn,{"code-path":"src/components/ai/AIAssistantPanel.tsx:429:11",children:[o.jsx(Wn,{"code-path":"src/components/ai/AIAssistantPanel.tsx:430:13",asChild:!0,children:o.jsx(B,{"code-path":"src/components/ai/AIAssistantPanel.tsx:431:15",variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-muted text-text-tertiary hover:text-text-primary transition-colors",onClick:M,disabled:i,children:o.jsx(Xo,{"code-path":"src/components/ai/AIAssistantPanel.tsx:438:17",size:14})})}),o.jsx(_n,{"code-path":"src/components/ai/AIAssistantPanel.tsx:441:13",children:o.jsx("p",{"code-path":"src/components/ai/AIAssistantPanel.tsx:442:15",children:"ÈáçÁΩÆ‰ºöËØù"})})]})})]}),t&&o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:450:9",className:"px-4 py-2 border-b border-border bg-primary/5 shrink-0",children:o.jsxs(le,{"code-path":"src/components/ai/AIAssistantPanel.tsx:451:11",variant:"outline",className:"text-xs w-full justify-center",children:["Âú∫ÊôØ ",t.number,"Ôºö",t.location]})}),o.jsx(ot,{"code-path":"src/components/ai/AIAssistantPanel.tsx:458:7",className:"flex-1 min-h-0 px-4",ref:f,children:o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:459:9",className:"py-4 space-y-4",children:[n.map(w=>o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:461:13",className:`flex flex-col ${w.role==="user"?"items-end":"items-start"}`,children:o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:465:15",className:`max-w-[90%] rounded-2xl px-4 py-3 ${w.role==="user"?"bg-primary text-primary-foreground rounded-br-md":"bg-elevated border border-border rounded-bl-md"}`,children:[w.role==="user"?o.jsx("p",{"code-path":"src/components/ai/AIAssistantPanel.tsx:472:19",className:"text-sm whitespace-pre-wrap",children:w.content}):o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:474:19",className:"prose prose-sm prose-invert w-full text-sm break-words whitespace-pre-wrap overflow-hidden [&>p]:mb-2 [&>p:last-child]:mb-0 [&>ul]:list-disc [&>ul]:pl-4 [&>ol]:list-decimal [&>ol]:pl-4 [&>code]:bg-background [&>code]:px-1 [&>code]:rounded [&>pre]:overflow-x-auto [&>pre]:max-w-full [&_pre]:whitespace-pre-wrap [&_pre]:break-words [&_code]:break-all",children:o.jsx(ft,{"code-path":"src/components/ai/AIAssistantPanel.tsx:475:21",remarkPlugins:[mt],children:Ot(w.content)})}),w.ui_interaction&&o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:482:19",className:"mt-4 pt-3 border-t border-border/50",children:o.jsx(Yo,{"code-path":"src/components/ai/AIAssistantPanel.tsx:483:21",block:w.ui_interaction})}),o.jsx("p",{"code-path":"src/components/ai/AIAssistantPanel.tsx:487:17",className:`text-xs mt-1.5 ${w.role==="user"?"text-primary-foreground/60":"text-text-tertiary"}`,children:w.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},w.id)),l&&o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:496:13",className:"flex justify-start",children:o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:497:15",className:"bg-elevated border border-border rounded-2xl rounded-bl-md px-4 py-3 max-w-[90%]",children:[o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:498:17",className:"prose prose-sm prose-invert w-full text-sm break-words whitespace-pre-wrap overflow-hidden [&>p]:mb-2 [&>p:last-child]:mb-0 [&>ul]:list-disc [&>ul]:pl-4 [&>ol]:list-decimal [&>ol]:pl-4 [&>pre]:overflow-x-auto [&>pre]:max-w-full [&_pre]:whitespace-pre-wrap [&_pre]:break-words [&_code]:break-all",children:o.jsx(ft,{"code-path":"src/components/ai/AIAssistantPanel.tsx:499:19",remarkPlugins:[mt],children:Ot(l)})}),o.jsx("span",{"code-path":"src/components/ai/AIAssistantPanel.tsx:503:17",className:"inline-block w-2 h-4 bg-primary ml-1 animate-pulse"})]})}),i&&!l&&o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:510:13",className:"flex justify-start",children:o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:511:15",className:"bg-elevated border border-border rounded-2xl rounded-bl-md px-4 py-3",children:o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:512:17",className:"flex items-center gap-2 text-text-tertiary text-sm",children:[o.jsx(qe,{"code-path":"src/components/ai/AIAssistantPanel.tsx:513:19",size:14,className:"animate-spin"}),o.jsx("span",{"code-path":"src/components/ai/AIAssistantPanel.tsx:514:19",children:u})]})})})]})}),o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:523:7",className:"p-4 border-t border-border bg-surface",children:[o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:525:9",className:"flex items-center justify-between mb-2 text-[10px] text-text-tertiary",children:[o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:526:11",className:"flex gap-2",children:[o.jsxs("span",{"code-path":"src/components/ai/AIAssistantPanel.tsx:527:13",children:["PID: ",E?.slice(0,6),"..."]}),o.jsxs("span",{"code-path":"src/components/ai/AIAssistantPanel.tsx:528:13",children:["TID: ",v?v.slice(0,8)+"...":"Empty"]})]}),o.jsx("button",{"code-path":"src/components/ai/AIAssistantPanel.tsx:530:11",onClick:()=>{E&&K.recoverChatHistory(E).then(({messages:w})=>{w.length>0?a(w):alert("No history found")})},className:"hover:text-primary underline",children:"Âº∫Âà∂ÊÅ¢Â§ç"})]}),o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:545:9",className:"relative",children:[o.jsx("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:546:11",className:"flex flex-wrap gap-2 mb-3",children:$.map(w=>o.jsxs(B,{"code-path":"src/components/ai/AIAssistantPanel.tsx:548:15",variant:"outline",size:"sm",onClick:()=>H(w.prompt),className:"text-xs h-7 gap-1 flex-1 min-w-[80px]",disabled:i,children:[w.icon,w.label]},w.label))}),o.jsxs("div",{"code-path":"src/components/ai/AIAssistantPanel.tsx:562:11",className:"flex items-center gap-2",children:[o.jsx(Go,{"code-path":"src/components/ai/AIAssistantPanel.tsx:563:13",value:s,onChange:w=>r(w.target.value),onKeyDown:L,placeholder:"ËæìÂÖ•Êåá‰ª§ÊàñÈóÆÈ¢ò...",className:"flex-1 h-10 bg-background",disabled:i}),o.jsx(B,{"code-path":"src/components/ai/AIAssistantPanel.tsx:571:13",onClick:_,disabled:!s.trim()||i,className:"btn-primary h-10 w-10 p-0",children:o.jsx(Uo,{"code-path":"src/components/ai/AIAssistantPanel.tsx:576:15",size:16})})]})]})]}),o.jsx(ra,{"code-path":"src/components/ai/AIAssistantPanel.tsx:583:7",open:m,onOpenChange:x,children:o.jsxs(ia,{"code-path":"src/components/ai/AIAssistantPanel.tsx:584:9",children:[o.jsxs(ca,{"code-path":"src/components/ai/AIAssistantPanel.tsx:585:11",children:[o.jsx(da,{"code-path":"src/components/ai/AIAssistantPanel.tsx:586:13",children:"Á°ÆËÆ§ÈáçÁΩÆ‰ºöËØùÔºü"}),o.jsx(pa,{"code-path":"src/components/ai/AIAssistantPanel.tsx:587:13",children:"ËøôÂ∞ÜÊ∏ÖÁ©∫ÂΩìÂâçÊâÄÊúâÂØπËØùËÆ∞ÂΩïÔºåÂπ∂ÈáçÊñ∞ÂºÄÂßã‰∏Ä‰∏™Êñ∞ÁöÑÂØπËØù„ÄÇÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ"})]}),o.jsxs(la,{"code-path":"src/components/ai/AIAssistantPanel.tsx:591:11",children:[o.jsx(ha,{"code-path":"src/components/ai/AIAssistantPanel.tsx:592:13",children:"ÂèñÊ∂à"}),o.jsx(ua,{"code-path":"src/components/ai/AIAssistantPanel.tsx:593:13",onClick:O,children:"Á°ÆËÆ§ÈáçÁΩÆ"})]})]})})]})}const fa=[{id:"novel",label:"Â∞èËØ¥",icon:qo},{id:"script",label:"ÂâßÊú¨",icon:Lt},{id:"storyboard",label:"ÂàÜÈïú",icon:Ft}];function ma({activeModule:e,onModuleChange:t}){return o.jsx("div",{"code-path":"src/components/workshop/ModuleTabs.tsx:19:5",className:"flex items-center gap-1 p-1 bg-surface rounded-lg border border-border",children:fa.map(s=>{const r=s.icon,n=e===s.id;return o.jsxs("button",{"code-path":"src/components/workshop/ModuleTabs.tsx:25:11",onClick:()=>t(s.id),className:D("flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",n?"bg-primary text-primary-foreground shadow-lg shadow-primary/20":"text-text-secondary hover:text-text-primary hover:bg-elevated"),children:[o.jsx(r,{"code-path":"src/components/workshop/ModuleTabs.tsx:35:13",size:16}),o.jsx("span",{"code-path":"src/components/workshop/ModuleTabs.tsx:36:13",children:s.label})]},s.id)})})}function ga({mode:e,onModeChange:t}){return o.jsxs("div",{"code-path":"src/components/workshop/ScriptModeToggle.tsx:12:5",className:"inline-flex items-center gap-1 p-1 bg-surface rounded-lg border border-border",children:[o.jsx("button",{"code-path":"src/components/workshop/ScriptModeToggle.tsx:13:7",onClick:()=>t("story"),className:D("px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-200",e==="story"?"bg-accent text-accent-foreground font-semibold":"text-text-secondary hover:text-text-primary"),children:"ÊïÖ‰∫ãÊ®°Âºè"}),o.jsx("button",{"code-path":"src/components/workshop/ScriptModeToggle.tsx:24:7",onClick:()=>t("script"),className:D("px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-200",e==="script"?"bg-accent text-accent-foreground font-semibold":"text-text-secondary hover:text-text-primary"),children:"ÂâßÊú¨Ê®°Âºè"})]})}function ya({content:e,onChange:t,title:s,onTitleChange:r}){const[n,a]=d.useState(!1);return o.jsxs("div",{"code-path":"src/components/workshop/NovelEditor.tsx:16:5",className:"flex flex-col h-full",children:[o.jsxs("div",{"code-path":"src/components/workshop/NovelEditor.tsx:17:7",className:"flex items-center gap-1 px-4 py-2 border-b border-border bg-surface/50",children:[o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:18:9",icon:Jo,label:"Á≤ó‰Ωì"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:19:9",icon:Ko,label:"Êñú‰Ωì"}),o.jsx("div",{"code-path":"src/components/workshop/NovelEditor.tsx:20:9",className:"w-px h-4 bg-border mx-1"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:21:9",icon:Qo,label:"Ê†áÈ¢ò1"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:22:9",icon:Zo,label:"Ê†áÈ¢ò2"}),o.jsx("div",{"code-path":"src/components/workshop/NovelEditor.tsx:23:9",className:"w-px h-4 bg-border mx-1"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:24:9",icon:es,label:"ÂºïÁî®"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:25:9",icon:ts,label:"ÂàóË°®"}),o.jsx("div",{"code-path":"src/components/workshop/NovelEditor.tsx:26:9",className:"flex-1"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:27:9",icon:os,label:"Êí§ÈîÄ"}),o.jsx(ce,{"code-path":"src/components/workshop/NovelEditor.tsx:28:9",icon:ss,label:"ÈáçÂÅö"})]}),o.jsx("div",{"code-path":"src/components/workshop/NovelEditor.tsx:31:7",className:"flex-1 overflow-y-auto p-6",children:o.jsxs("div",{"code-path":"src/components/workshop/NovelEditor.tsx:32:9",className:"max-w-3xl mx-auto space-y-6",children:[o.jsx("input",{"code-path":"src/components/workshop/NovelEditor.tsx:33:11",type:"text",value:s,onChange:i=>r(i.target.value),placeholder:"ËæìÂÖ•Á´†ËäÇÊ†áÈ¢ò...",className:"w-full text-2xl font-bold bg-transparent border-none outline-none placeholder:text-text-tertiary text-text-primary"}),o.jsx("div",{"code-path":"src/components/workshop/NovelEditor.tsx:41:11",className:D("min-h-[400px] rounded-lg transition-all duration-200",n&&"ring-2 ring-primary/20"),children:o.jsx("textarea",{"code-path":"src/components/workshop/NovelEditor.tsx:47:13",value:e,onChange:i=>t(i.target.value),onFocus:()=>a(!0),onBlur:()=>a(!1),placeholder:"ÂºÄÂßãÂàõ‰Ωú‰Ω†ÁöÑÂ∞èËØ¥...",className:"w-full h-full min-h-[400px] bg-transparent border-none outline-none resize-none text-base leading-relaxed text-text-primary placeholder:text-text-tertiary font-sans",style:{lineHeight:"1.75"}})})]})})]})}function ce({icon:e,label:t,onClick:s,isActive:r}){return o.jsx("button",{"code-path":"src/components/workshop/NovelEditor.tsx:72:5",onClick:s,title:t,className:D("p-2 rounded-md transition-all duration-200",r?"bg-primary/20 text-primary":"text-text-secondary hover:text-text-primary hover:bg-elevated"),children:o.jsx(e,{"code-path":"src/components/workshop/NovelEditor.tsx:82:7",size:16})})}function ba({storyContent:e,scriptContent:t,onStoryChange:s,onScriptChange:r,title:n}){const[a,i]=d.useState("story"),[c,l]=d.useState(!1);return o.jsxs("div",{"code-path":"src/components/workshop/ScriptEditor.tsx:24:5",className:"flex flex-col h-full",children:[o.jsxs("div",{"code-path":"src/components/workshop/ScriptEditor.tsx:25:7",className:"flex items-center justify-between px-4 py-3 border-b border-border bg-surface/50",children:[o.jsx("h2",{"code-path":"src/components/workshop/ScriptEditor.tsx:26:9",className:"text-lg font-semibold text-text-primary",children:n}),o.jsx(ga,{"code-path":"src/components/workshop/ScriptEditor.tsx:27:9",mode:a,onModeChange:i})]}),o.jsx("div",{"code-path":"src/components/workshop/ScriptEditor.tsx:30:7",className:"flex-1 overflow-y-auto p-6",children:o.jsx("div",{"code-path":"src/components/workshop/ScriptEditor.tsx:31:9",className:"max-w-3xl mx-auto",children:a==="story"?o.jsx(wa,{"code-path":"src/components/workshop/ScriptEditor.tsx:33:13",content:e,onChange:s,isFocused:c,onFocus:()=>l(!0),onBlur:()=>l(!1)}):o.jsx(va,{"code-path":"src/components/workshop/ScriptEditor.tsx:41:13",content:t,onChange:r,isFocused:c,onFocus:()=>l(!0),onBlur:()=>l(!1)})})})]})}function wa({content:e,onChange:t,isFocused:s,onFocus:r,onBlur:n}){return o.jsx("div",{"code-path":"src/components/workshop/ScriptEditor.tsx:65:5",className:D("min-h-[500px] rounded-lg transition-all duration-200 p-6",s&&"ring-2 ring-primary/20"),children:o.jsx("textarea",{"code-path":"src/components/workshop/ScriptEditor.tsx:71:7",value:e,onChange:a=>t(a.target.value),onFocus:r,onBlur:n,placeholder:"Âú®Ê≠§ËæìÂÖ•ÊïÖ‰∫ãÂÜÖÂÆπ...",className:"w-full h-full min-h-[500px] bg-transparent border-none outline-none resize-none text-base leading-relaxed text-text-primary placeholder:text-text-tertiary font-sans",style:{lineHeight:"1.8"}})})}function va({content:e,onChange:t,isFocused:s,onFocus:r,onBlur:n}){return o.jsx("div",{"code-path":"src/components/workshop/ScriptEditor.tsx:94:5",className:D("min-h-[500px] rounded-lg transition-all duration-200 p-6 font-mono text-sm",s&&"ring-2 ring-primary/20"),children:o.jsx("textarea",{"code-path":"src/components/workshop/ScriptEditor.tsx:100:7",value:e,onChange:a=>t(a.target.value),onFocus:r,onBlur:n,placeholder:`„ÄêÂú∫Ê¨°„ÄëEXT. Âú∫ÊôØ - Êó∂Èó¥

„Äê‰∫∫Áâ©„ÄëËßíËâ≤ÂêçÁß∞ÔºàÊèèËø∞Ôºâ

„ÄêÊ≠£Êñá„Äë
‚ñ≥ Âä®‰ΩúÊèèËø∞
ËßíËâ≤ÔºöÂØπÁôΩÂÜÖÂÆπ
‚ñ≥ ÈïúÂ§¥ÊåáÁ§∫`,className:"w-full h-full min-h-[500px] bg-transparent border-none outline-none resize-none leading-relaxed text-text-primary placeholder:text-text-tertiary",style:{lineHeight:"1.8"}})})}function Sa({className:e,...t}){return o.jsx("div",{"code-path":"src/components/ui/card.tsx:7:5","data-slot":"card",className:D("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function ja({className:e,...t}){return o.jsx("div",{"code-path":"src/components/ui/card.tsx:20:5","data-slot":"card-header",className:D("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Aa({className:e,...t}){return o.jsx("div",{"code-path":"src/components/ui/card.tsx:33:5","data-slot":"card-title",className:D("leading-none font-semibold",e),...t})}function Na({className:e,...t}){return o.jsx("div",{"code-path":"src/components/ui/card.tsx:66:5","data-slot":"card-content",className:D("px-6",e),...t})}function ka({shots:e,onGenerate:t,isGenerating:s=!1}){const[r,n]=d.useState(null),[a,i]=d.useState("grid"),c=l=>{n(l)};return o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:39:5",className:"flex flex-col h-full",children:[o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:40:7",className:"flex items-center justify-between px-4 py-3 border-b border-border bg-surface/50",children:[o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:41:9",className:"flex items-center gap-4",children:[o.jsx("h2",{"code-path":"src/components/workshop/StoryboardEditor.tsx:42:11",className:"text-lg font-semibold text-text-primary",children:"ÂàÜÈïúÂàóË°®"}),o.jsxs(le,{"code-path":"src/components/workshop/StoryboardEditor.tsx:43:11",variant:"secondary",children:[e.length," ‰∏™ÂàÜÈïú"]})]}),o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:45:9",className:"flex items-center gap-2",children:[o.jsx(Pa,{"code-path":"src/components/workshop/StoryboardEditor.tsx:46:11",mode:a,onModeChange:i}),o.jsx(B,{"code-path":"src/components/workshop/StoryboardEditor.tsx:47:11",onClick:t,disabled:s,className:"gap-2 bg-primary text-primary-foreground hover:bg-primary/90",children:s?o.jsxs(o.Fragment,{children:[o.jsx($t,{"code-path":"src/components/workshop/StoryboardEditor.tsx:54:17",className:"w-4 h-4 animate-spin"}),"ÁîüÊàê‰∏≠..."]}):o.jsxs(o.Fragment,{children:[o.jsx(se,{"code-path":"src/components/workshop/StoryboardEditor.tsx:59:17",className:"w-4 h-4"}),"AI ÁîüÊàêÂàÜÈïú"]})})]})]}),o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:67:7",className:"flex-1 overflow-hidden flex",children:[o.jsx(ot,{"code-path":"src/components/workshop/StoryboardEditor.tsx:68:9",className:"flex-1 p-4",children:e.length===0?o.jsx(Ea,{"code-path":"src/components/workshop/StoryboardEditor.tsx:70:13",onGenerate:t,isGenerating:s}):a==="grid"?o.jsx(Ca,{"code-path":"src/components/workshop/StoryboardEditor.tsx:72:13",shots:e,onShotClick:c,selectedShot:r}):o.jsx(Ta,{"code-path":"src/components/workshop/StoryboardEditor.tsx:74:13",shots:e,onShotClick:c,selectedShot:r})}),r&&o.jsx(Ra,{"code-path":"src/components/workshop/StoryboardEditor.tsx:79:11",shot:r,onClose:()=>n(null)})]})]})}function Pa({mode:e,onModeChange:t}){return o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:88:5",className:"flex items-center gap-1 p-1 bg-surface rounded border border-border",children:[o.jsx("button",{"code-path":"src/components/workshop/StoryboardEditor.tsx:89:7",onClick:()=>t("grid"),className:D("p-1.5 rounded transition-all",e==="grid"?"bg-primary text-primary-foreground":"text-text-secondary hover:text-text-primary"),title:"ÁΩëÊ†ºËßÜÂõæ",children:o.jsx(Ft,{"code-path":"src/components/workshop/StoryboardEditor.tsx:97:9",size:16})}),o.jsx("button",{"code-path":"src/components/workshop/StoryboardEditor.tsx:99:7",onClick:()=>t("list"),className:D("p-1.5 rounded transition-all",e==="list"?"bg-primary text-primary-foreground":"text-text-secondary hover:text-text-primary"),title:"ÂàóË°®ËßÜÂõæ",children:o.jsx(st,{"code-path":"src/components/workshop/StoryboardEditor.tsx:107:9",size:16})})]})}function Ea({onGenerate:e,isGenerating:t}){return o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:115:5",className:"flex flex-col items-center justify-center h-full py-12 space-y-4",children:[o.jsx("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:116:7",className:"p-4 rounded-full bg-primary/10",children:o.jsx(se,{"code-path":"src/components/workshop/StoryboardEditor.tsx:117:9",className:"w-8 h-8 text-primary"})}),o.jsx("h3",{"code-path":"src/components/workshop/StoryboardEditor.tsx:119:7",className:"text-lg font-semibold text-text-primary",children:"ÊöÇÊó†ÂàÜÈïú"}),o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:120:7",className:"text-sm text-text-secondary text-center max-w-md",children:"‰ΩøÁî® AI Ëá™Âä®‰ªéÂâßÊú¨ÂÜÖÂÆπÁîüÊàêÂàÜÈïúÔºåÊàñÊâãÂä®ÂàõÂª∫ÂàÜÈïú"}),o.jsx(B,{"code-path":"src/components/workshop/StoryboardEditor.tsx:123:7",onClick:e,disabled:t,className:"gap-2 bg-primary text-primary-foreground hover:bg-primary/90",children:t?o.jsxs(o.Fragment,{children:[o.jsx($t,{"code-path":"src/components/workshop/StoryboardEditor.tsx:130:13",className:"w-4 h-4 animate-spin"}),"ÁîüÊàê‰∏≠..."]}):o.jsxs(o.Fragment,{children:[o.jsx(se,{"code-path":"src/components/workshop/StoryboardEditor.tsx:135:13",className:"w-4 h-4"}),"‰∏ÄÈîÆÁîüÊàêÂàÜÈïú"]})})]})}function Ca({shots:e,onShotClick:t,selectedShot:s}){return o.jsx("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:154:5",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(r=>o.jsxs(Sa,{"code-path":"src/components/workshop/StoryboardEditor.tsx:156:9",onClick:()=>t(r),className:D("cursor-pointer transition-all duration-200 hover:border-primary/50",s?.shotNumber===r.shotNumber&&"ring-2 ring-primary border-primary"),children:[o.jsx(ja,{"code-path":"src/components/workshop/StoryboardEditor.tsx:164:11",className:"p-3 pb-2",children:o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:165:13",className:"flex items-center justify-between",children:[o.jsxs(Aa,{"code-path":"src/components/workshop/StoryboardEditor.tsx:166:15",className:"text-sm font-medium",children:["#",r.shotNumber," ",r.title]}),o.jsx(_o,{"code-path":"src/components/workshop/StoryboardEditor.tsx:169:15",shotType:r.shotType})]})}),o.jsxs(Na,{"code-path":"src/components/workshop/StoryboardEditor.tsx:172:11",className:"p-3 pt-0 space-y-2",children:[o.jsx("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:173:13",className:"aspect-video bg-surface rounded border border-border flex items-center justify-center",children:o.jsx(st,{"code-path":"src/components/workshop/StoryboardEditor.tsx:174:15",className:"w-8 h-8 text-text-tertiary/30"})}),r.description&&o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:177:15",className:"text-xs text-text-secondary line-clamp-2",children:r.description})]})]},r.shotNumber))})}function Ta({shots:e,onShotClick:t,selectedShot:s}){return o.jsx("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:196:5",className:"space-y-2",children:e.map(r=>o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:198:9",onClick:()=>t(r),className:D("flex items-center gap-4 p-3 rounded-lg border cursor-pointer transition-all duration-200",s?.shotNumber===r.shotNumber?"bg-primary/10 border-primary":"bg-surface border-border hover:border-primary/50"),children:[o.jsx("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:208:11",className:"w-12 h-12 bg-surface rounded border border-border flex items-center justify-center flex-shrink-0",children:o.jsxs("span",{"code-path":"src/components/workshop/StoryboardEditor.tsx:209:13",className:"text-lg font-bold text-text-tertiary",children:["#",r.shotNumber]})}),o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:211:11",className:"flex-1 min-w-0",children:[o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:212:13",className:"flex items-center gap-2",children:[o.jsx("span",{"code-path":"src/components/workshop/StoryboardEditor.tsx:213:15",className:"font-medium text-text-primary",children:r.title}),o.jsx(_o,{"code-path":"src/components/workshop/StoryboardEditor.tsx:214:15",shotType:r.shotType})]}),"            ",r.description&&o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:216:15",className:"text-sm text-text-secondary truncate",children:r.description})]})]},r.shotNumber))})}function _o({shotType:e}){const t=s=>{switch(s){case"ÂÖ®ÊôØ":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"‰∏≠ÊôØ":return"bg-green-500/10 text-green-500 border-green-500/20";case"ÁâπÂÜô":return"bg-purple-500/10 text-purple-500 border-purple-500/20";default:return"bg-surface text-text-secondary"}};return o.jsx(le,{"code-path":"src/components/workshop/StoryboardEditor.tsx:236:5",variant:"outline",className:D("text-xs",t(e)),children:e||"ÈïúÂ§¥"})}function Ra({shot:e,onClose:t}){return o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:244:5",className:"w-80 border-l border-border bg-surface p-4 space-y-4",children:[o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:245:7",className:"flex items-center justify-between",children:[o.jsx("h3",{"code-path":"src/components/workshop/StoryboardEditor.tsx:246:9",className:"font-semibold text-text-primary",children:"ÂàÜÈïúËØ¶ÊÉÖ"}),o.jsx("button",{"code-path":"src/components/workshop/StoryboardEditor.tsx:247:9",onClick:t,className:"text-text-tertiary hover:text-text-primary",children:"√ó"})]}),o.jsx("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:252:7",className:"aspect-video bg-surface rounded-lg border border-border flex items-center justify-center",children:o.jsx(st,{"code-path":"src/components/workshop/StoryboardEditor.tsx:253:9",className:"w-12 h-12 text-text-tertiary/30"})}),o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:256:7",className:"space-y-3",children:[o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:257:9",children:[o.jsx("label",{"code-path":"src/components/workshop/StoryboardEditor.tsx:258:11",className:"text-xs text-text-tertiary",children:"ÈïúÂ§¥ÁºñÂè∑"}),o.jsxs("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:259:11",className:"text-sm font-medium",children:["#",e.shotNumber," ",e.title]})]}),e.shotType&&o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:263:11",children:[o.jsx("label",{"code-path":"src/components/workshop/StoryboardEditor.tsx:264:13",className:"text-xs text-text-tertiary",children:"ÊôØÂà´"}),o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:265:13",className:"text-sm",children:e.shotType})]}),e.cameraMove&&o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:270:11",children:[o.jsx("label",{"code-path":"src/components/workshop/StoryboardEditor.tsx:271:13",className:"text-xs text-text-tertiary",children:"ËøêÈïú"}),o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:272:13",className:"text-sm",children:e.cameraMove})]}),e.description&&o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:277:11",children:[o.jsx("label",{"code-path":"src/components/workshop/StoryboardEditor.tsx:278:13",className:"text-xs text-text-tertiary",children:"ÁîªÈù¢ÊèèËø∞"}),o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:279:13",className:"text-sm text-text-secondary",children:e.description})]}),e.dialog&&o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:284:11",children:[o.jsx("label",{"code-path":"src/components/workshop/StoryboardEditor.tsx:285:13",className:"text-xs text-text-tertiary",children:"ÂØπÁôΩ"}),o.jsx("p",{"code-path":"src/components/workshop/StoryboardEditor.tsx:286:13",className:"text-sm text-text-secondary",children:e.dialog})]})]}),o.jsxs("div",{"code-path":"src/components/workshop/StoryboardEditor.tsx:291:7",className:"pt-4 border-t border-border space-y-2",children:[o.jsxs(B,{"code-path":"src/components/workshop/StoryboardEditor.tsx:292:9",className:"w-full gap-2 bg-primary text-primary-foreground",children:[o.jsx(rs,{"code-path":"src/components/workshop/StoryboardEditor.tsx:293:11",className:"w-4 h-4"}),"Á°ÆËÆ§‰øÆÊîπ"]}),o.jsxs(B,{"code-path":"src/components/workshop/StoryboardEditor.tsx:296:9",variant:"outline",className:"w-full gap-2",children:["ÂâçÂæÄÁîªÊùø",o.jsx(ns,{"code-path":"src/components/workshop/StoryboardEditor.tsx:298:11",className:"w-4 h-4"})]})]})]})}function Ia({scriptScore:e=88,diagnostics:t=[],onReDiagnose:s}){const[r,n]=d.useState(!1);return o.jsxs("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:27:5",className:D("border-t border-border bg-surface transition-all duration-300",r?"h-64":"h-12"),children:[o.jsxs("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:31:7",className:"flex items-center justify-between px-4 h-12",children:[o.jsxs("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:32:9",className:"flex items-center gap-6",children:[o.jsxs("button",{"code-path":"src/components/workshop/FooterToolbar.tsx:33:11",className:"flex items-center gap-2 text-sm text-text-secondary hover:text-text-primary transition-colors",children:[o.jsx(Lt,{"code-path":"src/components/workshop/FooterToolbar.tsx:34:13",size:16,className:"text-primary"}),o.jsx("span",{"code-path":"src/components/workshop/FooterToolbar.tsx:35:13",children:"ÂâßÊú¨ÂåªÁîü"}),o.jsx("span",{"code-path":"src/components/workshop/FooterToolbar.tsx:36:13",className:D("font-bold",e>=80?"text-green-500":e>=60?"text-yellow-500":"text-red-500"),children:e})]}),o.jsxs("button",{"code-path":"src/components/workshop/FooterToolbar.tsx:45:11",className:"flex items-center gap-2 text-sm text-text-secondary hover:text-text-primary transition-colors",children:[o.jsx(zt,{"code-path":"src/components/workshop/FooterToolbar.tsx:46:13",size:16,className:"text-accent"}),o.jsx("span",{"code-path":"src/components/workshop/FooterToolbar.tsx:47:13",children:"ÂâßÊÉÖÂº†ÂäõÊõ≤Á∫ø"})]})]}),o.jsxs("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:51:9",className:"flex items-center gap-4",children:[o.jsxs("button",{"code-path":"src/components/workshop/FooterToolbar.tsx:52:11",onClick:s,className:"flex items-center gap-2 text-sm text-text-secondary hover:text-primary transition-colors",children:[o.jsx(se,{"code-path":"src/components/workshop/FooterToolbar.tsx:56:13",size:14}),o.jsx("span",{"code-path":"src/components/workshop/FooterToolbar.tsx:57:13",children:"ÈáçÊñ∞ËØäÊñ≠"})]}),o.jsx("button",{"code-path":"src/components/workshop/FooterToolbar.tsx:60:11",onClick:()=>n(!r),className:"p-1.5 rounded hover:bg-elevated text-text-secondary transition-colors",children:r?o.jsx(as,{"code-path":"src/components/workshop/FooterToolbar.tsx:64:27",size:18}):o.jsx(is,{"code-path":"src/components/workshop/FooterToolbar.tsx:64:55",size:18})})]})]}),r&&o.jsx("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:70:9",className:"px-4 pb-4 h-52 overflow-y-auto",children:o.jsx("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:71:11",className:"space-y-3",children:t.length>0?t.map(a=>o.jsx(Da,{"code-path":"src/components/workshop/FooterToolbar.tsx:74:17",item:a},a.id)):o.jsx("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:77:15",className:"flex items-center justify-center h-full text-text-tertiary",children:'ÁÇπÂáª"ÈáçÊñ∞ËØäÊñ≠"Ëé∑ÂèñÂâßÊú¨ÂàÜÊûêÂª∫ËÆÆ'})})})]})}function Da({item:e}){const t=r=>{switch(r){case"logic":return"text-blue-500 bg-blue-500/10";case"dialogue":return"text-purple-500 bg-purple-500/10";case"pacing":return"text-yellow-500 bg-yellow-500/10";case"character":return"text-green-500 bg-green-500/10";default:return"text-text-secondary bg-surface"}},s=r=>{switch(r){case"logic":return"ÈÄªËæë/ËÆæÂÆö";case"dialogue":return"Âè∞ËØçÊâìÁ£®";case"pacing":return"ËäÇÂ•èÊääÊéß";case"character":return"‰∫∫Áâ©Â°ëÈÄ†";default:return"ÂÖ∂‰ªñ"}};return o.jsx("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:110:5",className:"p-3 rounded-lg bg-elevated border border-border",children:o.jsxs("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:111:7",className:"flex items-start gap-3",children:[o.jsx("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:112:9",className:D("flex-shrink-0 w-8 h-8 rounded flex items-center justify-center font-bold text-sm",e.score>=80?"text-green-500 bg-green-500/10":e.score>=60?"text-yellow-500 bg-yellow-500/10":"text-red-500 bg-red-500/10"),children:e.score}),o.jsxs("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:120:9",className:"flex-1 min-w-0 space-y-2",children:[o.jsx("div",{"code-path":"src/components/workshop/FooterToolbar.tsx:121:11",className:"flex items-center gap-2",children:o.jsxs("span",{"code-path":"src/components/workshop/FooterToolbar.tsx:122:13",className:"text-xs text-text-tertiary bg-surface px-2 py-0.5 rounded",children:['"',e.quote,'"']})}),o.jsx("p",{"code-path":"src/components/workshop/FooterToolbar.tsx:127:11",className:"text-sm text-text-secondary",children:e.suggestion})]}),o.jsx("span",{"code-path":"src/components/workshop/FooterToolbar.tsx:130:9",className:D("flex-shrink-0 text-xs px-2 py-1 rounded",t(e.category)),children:s(e.category)})]})})}function _a(){const e=cs(),{projectId:t,episodeId:s}=ls(),{openBackstageModal:r,addToast:n}=_t(),a=d.useRef(null),[i,c]=d.useState("script"),[l,p]=d.useState(null),[u,h]=d.useState([]),[m,x]=d.useState([]),[f,g]=d.useState(null),[y,b]=d.useState(null),[v,j]=d.useState(!0),[S,A]=d.useState(!1),[k,E]=d.useState("saved"),[W,_]=d.useState(null),[L,$]=d.useState(""),[H,M]=d.useState(""),[O,w]=d.useState(""),[T,R]=d.useState(""),[N,C]=d.useState([]),[P,F]=d.useState(!1),V=d.useRef("");d.useEffect(()=>{if(!t||!s)return;(async()=>{j(!0),_(null);try{const[z,ie,Fo]=await Promise.all([bt.getEpisode(t,s),wt.listScenes(s),yt.getProject(t)]);g(z.data),h(ie.data),b(Fo.data);const Ye=z.data.scriptText||"";w(Ye),R(Ye),$(Ye),M(z.data.title||""),ie.data.length>0&&p(String(ie.data[0].sceneId))}catch(z){console.error("Failed to load data:",z),_("Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï")}finally{j(!1)}})()},[t,s]),d.useEffect(()=>{if(!s||!l)return;a.current&&a.current.abort(),a.current=new AbortController;const{signal:I}=a.current;return(async()=>{try{const ie=await Rs.listShots(s,l);if(I.aborted)return;x(ie.data)}catch(ie){if(ie.name==="AbortError"||I.aborted)return;console.error("Failed to load shots:",ie)}})(),()=>{a.current?.abort()}},[s,l]);const[G,ue]=d.useState(!1),[je,he]=d.useState(!1);d.useEffect(()=>{y?.isTemporary||y?.name?.startsWith("Êñ∞Â∞èËØ¥È°πÁõÆ-")||y?.name==="Êú™ÂëΩÂêçÈ°πÁõÆ"?he(!0):he(!1)},[y]);const oe=async(I=!1)=>{if(!(!t||!s)){if(je&&!I){ue(!0);return}A(!0),E("saving");try{let z="";switch(i){case"novel":z=L;break;case"script":z=T;break;default:z=O}await bt.updateEpisode(t,s,{scriptText:z}),V.current=z,E("saved"),n?.({type:"success",message:"ÂÜÖÂÆπÂ∑≤‰øùÂ≠ò"})}catch(z){console.error("Failed to save:",z),_("‰øùÂ≠òÂ§±Ë¥•"),E("unsaved"),n?.({type:"error",message:"‰øùÂ≠òÂ§±Ë¥•"})}finally{A(!1)}}},Ce=async I=>{if(t)try{await yt.saveTempProject(t,{name:I}),y&&(b({...y,name:I,isTemporary:!1}),he(!1)),ue(!1),await oe(!0),n?.({type:"success",message:`È°πÁõÆÂ∑≤ËΩ¨Ê≠£‰∏∫: ${I}`})}catch(z){console.error("Failed to convert project:",z),n?.({type:"error",message:"ËΩ¨Ê≠£È°πÁõÆÂ§±Ë¥•"})}};d.useEffect(()=>{const I=setInterval(async()=>{k==="unsaved"&&t&&s&&oe(!0)},3e4);return()=>clearInterval(I)},[k,t,s,je]);const He=I=>{switch(i){case"novel":$(I);break;case"script":R(I),w(I);break}I!==V.current&&E("unsaved")},Be=()=>{switch(k){case"saved":return o.jsx("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:251:16",className:"text-xs text-green-500",children:"Â∑≤‰øùÂ≠ò"});case"saving":return o.jsx("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:253:16",className:"text-xs text-yellow-500",children:"‰øùÂ≠ò‰∏≠..."});case"unsaved":return o.jsx("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:255:16",className:"text-xs text-orange-500",children:"Êú™‰øùÂ≠ò"});default:return null}},Ve=async()=>{if(s)try{const I=await wt.createScene(s,{location:"Êñ∞Âú∫ÊôØ",description:"",createMasterNode:!0});h(z=>[...z,I.data]),p(String(I.data.sceneId))}catch(I){console.error("Failed to create scene:",I),_("ÂàõÂª∫Âú∫ÊôØÂ§±Ë¥•")}},Xe=async()=>{F(!0),await new Promise(z=>setTimeout(z,2e3)),C([{shotNumber:1,title:"ÂºÄÂú∫ÂÖ®ÊôØ",shotType:"ÂÖ®ÊôØ",cameraMove:"ÈùôÊ≠¢",description:"Â±ïÁ§∫Âú∫ÊôØÂÖ®Ë≤åÔºåÂª∫Á´ãÁ©∫Èó¥ÊÑü"},{shotNumber:2,title:"‰∏ªËßíÁôªÂú∫",shotType:"‰∏≠ÊôØ",cameraMove:"Êé®Ëøë",description:"‰∏ªËßí‰ªéËøúÂ§ÑËµ∞Êù•ÔºåË°®ÊÉÖÂáùÈáç"},{shotNumber:3,title:"ÁúºÁ•ûÁâπÂÜô",shotType:"ÁâπÂÜô",cameraMove:"ÈùôÊ≠¢",description:"ÁúºÁ•û‰∏≠ÈÄèÈú≤Âá∫ÂÜ≥ÂøÉ"},{shotNumber:4,title:"ÂØπËØùÂú∫ÊôØ",shotType:"‰∏≠ÊôØ",cameraMove:"ÊëáÁßª",description:"‰∏§‰∫∫ÂØπËØùÔºåÊ∞îÊ∞õÁ¥ßÂº†"}]),F(!1),n?.({type:"success",message:"ÂàÜÈïúÁîüÊàêÂÆåÊàê"})},J=u.find(I=>String(I.sceneId)===l),Lo=()=>{switch(i){case"novel":return o.jsx(ya,{"code-path":"src/pages/ScriptWorkshopPage.tsx:301:11",content:L,onChange:He,title:H,onTitleChange:M});case"script":return o.jsx(ba,{"code-path":"src/pages/ScriptWorkshopPage.tsx:310:11",storyContent:O,scriptContent:T,onStoryChange:w,onScriptChange:R,title:f?.title||""});case"storyboard":return o.jsx(ka,{"code-path":"src/pages/ScriptWorkshopPage.tsx:320:11",shots:N,onShotsChange:C,onGenerate:Xe,isGenerating:P});default:return null}};return v?o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:334:7",className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:335:9",className:"flex items-center gap-2 text-text-secondary",children:[o.jsx(qe,{"code-path":"src/pages/ScriptWorkshopPage.tsx:336:11",className:"animate-spin",size:20}),o.jsx("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:337:11",children:"Âä†ËΩΩ‰∏≠..."})]})}):W?o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:345:7",className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:346:9",className:"text-center",children:[o.jsx("p",{"code-path":"src/pages/ScriptWorkshopPage.tsx:347:11",className:"text-error mb-4",children:W}),o.jsx(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:348:11",onClick:()=>window.location.reload(),children:"ÈáçËØï"})]})}):o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:355:5",className:"h-screen supports-[height:100dvh]:h-[100dvh] flex flex-col overflow-hidden bg-background",children:[o.jsxs("header",{"code-path":"src/pages/ScriptWorkshopPage.tsx:356:7",className:"flex-shrink-0 flex items-center justify-between px-4 py-3 bg-surface border-b border-border",children:[o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:357:9",className:"flex items-center gap-3",children:[o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:358:11",onClick:()=>e("/"),className:"cursor-pointer hover:opacity-80 transition-opacity flex items-center",title:"ËøîÂõûÂ∑•‰ΩúÂè∞",children:o.jsx(Cs,{"code-path":"src/pages/ScriptWorkshopPage.tsx:363:13",size:"sm",showText:!1})}),o.jsx("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:366:11",className:"text-text-tertiary text-sm",children:"/"}),o.jsx("button",{"code-path":"src/pages/ScriptWorkshopPage.tsx:368:11",onClick:()=>e(`/project/${t}`),className:"text-sm font-medium text-text-secondary hover:text-text-primary transition-colors truncate max-w-[150px]",title:"ËøîÂõûÈ°πÁõÆËØ¶ÊÉÖ",children:y?.name||"Âä†ËΩΩ‰∏≠..."}),o.jsx("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:376:11",className:"text-text-tertiary text-sm",children:"/"}),o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:378:11",className:"flex flex-col",children:o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:379:13",className:"flex items-center gap-2",children:[o.jsx("h1",{"code-path":"src/pages/ScriptWorkshopPage.tsx:380:15",className:"font-semibold text-sm text-text-primary",children:"ÂâßÊú¨Â∑•Âùä"}),o.jsxs(le,{"code-path":"src/pages/ScriptWorkshopPage.tsx:381:15",variant:"outline",className:"text-[10px] h-4 px-1 text-text-tertiary border-border",children:["Ep.",f?.episodeNumber]})]})})]}),o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:388:9",className:"flex items-center gap-3",children:[o.jsxs(le,{"code-path":"src/pages/ScriptWorkshopPage.tsx:389:11",variant:"secondary",className:"gap-1 hidden sm:inline-flex",children:[o.jsx(gt,{"code-path":"src/pages/ScriptWorkshopPage.tsx:390:13",size:14}),u.length," Âú∫ÊôØ"]}),o.jsxs(le,{"code-path":"src/pages/ScriptWorkshopPage.tsx:393:11",variant:"secondary",className:"gap-1 hidden sm:inline-flex",children:[o.jsx(ds,{"code-path":"src/pages/ScriptWorkshopPage.tsx:394:13",size:14}),m.length," ÈïúÂ§¥"]}),o.jsx(Ls,{"code-path":"src/pages/ScriptWorkshopPage.tsx:397:11",orientation:"vertical",className:"h-6 hidden sm:block"}),o.jsxs(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:398:11",variant:"outline",size:"sm",className:"gap-2 hidden sm:flex",onClick:()=>oe(!1),disabled:S,children:[S?o.jsx(qe,{"code-path":"src/pages/ScriptWorkshopPage.tsx:405:25",size:16,className:"animate-spin"}):o.jsx(ps,{"code-path":"src/pages/ScriptWorkshopPage.tsx:405:74",size:16}),"‰øùÂ≠ò"]}),o.jsxs(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:408:11",variant:"outline",size:"sm",className:"gap-2 hidden sm:flex border-primary text-primary hover:bg-primary/10",children:[o.jsx(se,{"code-path":"src/pages/ScriptWorkshopPage.tsx:413:13",size:16}),"ÂêåÊ≠•Âà∞ÂàÜÈïúÂè∞"]}),o.jsx(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:416:11",variant:"ghost",size:"sm",onClick:()=>r("settings"),children:o.jsx(us,{"code-path":"src/pages/ScriptWorkshopPage.tsx:421:13",size:18})})]})]}),o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:426:7",className:"flex-1 flex overflow-hidden",children:[o.jsxs(St,{"code-path":"src/pages/ScriptWorkshopPage.tsx:427:9",minWidth:200,maxWidth:400,defaultWidth:224,side:"left",storageKey:"script-workshop-left",className:"hidden md:flex flex-col bg-surface border-r border-border",children:[o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:435:11",className:"p-4 border-b border-border",children:o.jsxs(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:436:13",variant:"outline",className:"w-full gap-2",onClick:Ve,children:[o.jsx(hs,{"code-path":"src/pages/ScriptWorkshopPage.tsx:441:15",size:16}),"Ê∑ªÂä†Âú∫ÊôØ"]})}),o.jsx(ot,{"code-path":"src/pages/ScriptWorkshopPage.tsx:445:11",className:"flex-1 min-h-0",children:u.map(I=>o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:447:15",onClick:()=>p(String(I.sceneId)),className:`p-4 cursor-pointer border-b border-border transition-all duration-200 ${l===String(I.sceneId)?"bg-primary/10 border-l-2 border-l-primary":"hover:bg-elevated border-l-2 border-l-transparent"}`,children:[o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:455:17",className:"flex items-center gap-2 mb-2",children:[o.jsx(le,{"code-path":"src/pages/ScriptWorkshopPage.tsx:456:19",variant:"outline",className:"text-xs",children:I.sceneNumber}),o.jsxs("span",{"code-path":"src/pages/ScriptWorkshopPage.tsx:459:19",className:"text-xs text-text-tertiary flex items-center gap-1",children:[o.jsx(gt,{"code-path":"src/pages/ScriptWorkshopPage.tsx:460:21",size:12}),"Â§úÊôö"]})]}),o.jsx("p",{"code-path":"src/pages/ScriptWorkshopPage.tsx:464:17",className:"text-sm font-medium text-text-primary mb-1",children:I.location}),o.jsx("p",{"code-path":"src/pages/ScriptWorkshopPage.tsx:467:17",className:"text-xs text-text-secondary line-clamp-2",children:I.description||"ÊöÇÊó†ÊèèËø∞"}),o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:470:17",className:"flex items-center gap-1 mt-2",children:o.jsxs(le,{"code-path":"src/pages/ScriptWorkshopPage.tsx:471:19",variant:"secondary",className:"text-xs",children:[I.shotCount," ÈïúÂ§¥"]})})]},String(I.sceneId)))})]}),o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:480:9",className:"flex-1 flex flex-col overflow-hidden",children:[o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:481:11",className:"flex-shrink-0 flex items-center justify-between px-4 py-3 border-b border-border bg-surface/50",children:[o.jsx(ma,{"code-path":"src/pages/ScriptWorkshopPage.tsx:482:13",activeModule:i,onModuleChange:c}),o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:483:13",className:"flex items-center gap-4",children:[Be(),o.jsxs("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:485:15",className:"flex items-center gap-2",children:[o.jsxs(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:486:17",variant:"ghost",size:"sm",className:"gap-2 hidden lg:flex",children:[o.jsx(xs,{"code-path":"src/pages/ScriptWorkshopPage.tsx:487:19",size:16}),"ÈÖçÈü≥"]}),o.jsxs(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:490:17",variant:"ghost",size:"sm",className:"gap-2 hidden lg:flex",children:[o.jsx(fs,{"code-path":"src/pages/ScriptWorkshopPage.tsx:491:19",size:16}),"Èü≥‰πê"]}),o.jsxs(B,{"code-path":"src/pages/ScriptWorkshopPage.tsx:494:17",className:"btn-primary gap-2",children:[o.jsx(zt,{"code-path":"src/pages/ScriptWorkshopPage.tsx:495:19",size:16}),"È¢ÑËßà"]})]})]})]}),o.jsx("div",{"code-path":"src/pages/ScriptWorkshopPage.tsx:502:11",className:"flex-1 overflow-hidden",children:Lo()}),o.jsx(Ia,{"code-path":"src/pages/ScriptWorkshopPage.tsx:506:11",scriptScore:88,diagnostics:[{id:"1",score:88,quote:"ËøôÂèåÊâãÂÄºÈí±ÔºåÊØîÊàë‰ª¨Âú®Â∫üÂ¢üÈáåÊåñÂá∫Êù•ÁöÑ‰ªª‰Ωï...",suggestion:'Ê∑±‰∫ï‰∫∫‰ªéÊú™ÈÄÇÂ∫îËøáÂú∞Ë°®Ôºå‰ΩÜ‰∏ªËßíÁöÑË°®Áé∞Ôºà‰ªÖÊòØËôöÂº±ÔºâÁï•ÊòæÂπ≥Ê∑°„ÄÇÂØπ‰∫éÈ¶ñÊ¨°‰ªé"ÂùüÂ¢ì"Âá∫Êù•ÁöÑ‰∫∫ÔºåÂØπ"Â§©Á©∫"„ÄÅ"È£é"Êàñ"Êó†ÈôêÁ©∫Èó¥"ÁöÑÂøÉÁêÜÂÜ≤ÂáªÊèèÂÜôÂèØ‰ª•Êõ¥ÂÖ∑Âº†Âäõ„ÄÇ',category:"logic"},{id:"2",score:75,quote:"‰ªø‰ΩõËøòÊú™ÈÄÇÂ∫îÂú∞Ë°®Á®ÄËñÑÁöÑÁ©∫Ê∞î",suggestion:"ËøôÂè•Âè∞ËØçÁï•ÊòæÊñáÁªâÁªâÔºå‰∏çÂ§™ÂÉèÊòØ‰∏Ä‰∏™Âú®Â∫üÂúüÁîüÂ≠òÁöÑÂÜ∑ÈÖ∑Èõá‰Ω£ÂÖµ‰ºöËØ¥ÁöÑ„ÄÇ",category:"dialogue"}]})]}),o.jsx(St,{"code-path":"src/pages/ScriptWorkshopPage.tsx:527:9",minWidth:280,maxWidth:480,defaultWidth:320,side:"right",storageKey:"script-workshop-right",className:"hidden xl:flex flex-col bg-surface border-l border-border",children:o.jsx(xa,{"code-path":"src/pages/ScriptWorkshopPage.tsx:535:11",projectId:t,sceneContext:(()=>{if(J)return{id:String(J.sceneId),number:J.sceneNumber,location:J.location,description:J.description||""}})()})})]}),o.jsx(Ts,{"code-path":"src/pages/ScriptWorkshopPage.tsx:550:7",isOpen:G,onClose:()=>ue(!1),suggestedName:y?.name?.startsWith("Êñ∞Â∞èËØ¥È°πÁõÆ")?"":y?.name||"",onConfirm:Ce})]})}export{_a as ScriptWorkshopPage};
