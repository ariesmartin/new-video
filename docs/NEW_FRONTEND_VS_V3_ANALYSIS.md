# æ–°å‰ç«¯ vs V3 æ–‡æ¡£å¯¹æ¯”åˆ†ææŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

**æ–°å‰ç«¯æ¦‚å†µ**:
- **æŠ€æœ¯æ ˆ**: React 19 + Vite + TypeScript + TailwindCSS + Radix UI (Shadcn)
- **çŠ¶æ€ç®¡ç†**: Zustand (4ä¸ª Store: App/Canvas/UI/Project)
- **è·¯ç”±**: React Router (2é¡µé¢: Home/Project)
- **æ•°æ®æ¨¡å‹**: Project â†’ Episode â†’ Storyboard â†’ Card (å±‚çº§ç»“æ„)

**æ ¸å¿ƒå·®å¼‚**:
1. âœ… **æ–°å‰ç«¯é¢†å…ˆ**: å›¾åƒç¼–è¾‘åŠŸèƒ½ (Inpaint/Outpaint/Virtual Camera)
2. âœ… **V3 é¢†å…ˆ**: AI åŠ©æ‰‹èŠå¤© (Chat-Driven)ã€SDUI åè®®ã€æ¨¡å—åŒ–è§£è€¦
3. âš ï¸ **æ•°æ®æ¨¡å‹å†²çª**: V3 ä½¿ç”¨ story_nodesï¼Œæ–°å‰ç«¯ä½¿ç”¨ Card å±‚çº§
4. âš ï¸ **åç«¯ç¼ºå£**: æ–°å‰ç«¯å¤šé¡¹åŠŸèƒ½éœ€è¦åç«¯ API æ”¯æŒ

---

## ğŸ¯ è¯¦ç»†åŠŸèƒ½å¯¹æ¯”çŸ©é˜µ

### 1. æ ¸å¿ƒé¡µé¢ä¸å¸ƒå±€

| åŠŸèƒ½ | æ–°å‰ç«¯å®ç° | V3 æ–‡æ¡£è§„èŒƒ | å¯¹æ¯”ç»“æœ | åç«¯éœ€æ±‚ |
|------|-----------|-------------|----------|----------|
| **é¦–é¡µ (Home)** | âœ… å®Œæ•´å®ç° | âœ… Dashboard | ğŸŸ¢ åŸºæœ¬ä¸€è‡´ | æ— æ–°å¢ |
| **å·¥ä½œå°å¸ƒå±€** | âœ… ä¸‰æ å¸ƒå±€ | âœ… ä¸‰æ  (240/è‡ªé€‚åº”/320) | ğŸŸ¢ åŒ¹é… | æ— æ–°å¢ |
| **é¡¹ç›®é¡µé¢** | âœ… ProjectPage | âœ… åˆ†é•œç”»å¸ƒ | ğŸŸ¢ åŠŸèƒ½å¯¹é½ | æ— æ–°å¢ |
| **å…¨å±€ AI åŠ©æ‰‹** | âŒ ç¼ºå¤± | âœ… 320px/400px ä¾§è¾¹æ  | ğŸ”´ V3 é¢†å…ˆ | **éœ€å®ç°** |
| **SDUI äº¤äº’** | âŒ æ—  | âœ… Action Block åè®® | ğŸ”´ V3 é¢†å…ˆ | **éœ€å®ç°** |
| **ä¸»é¢˜åˆ‡æ¢** | âœ… Dark/Light | âœ… Dark Mode | ğŸŸ¢ ä¸€è‡´ | æ— æ–°å¢ |
| **å“åº”å¼** | âŒ åŸºç¡€ | âœ… xl/lg/md/sm æ–­ç‚¹ | ğŸŸ¡ éœ€å¢å¼º | æ—  |

### 2. æ•°æ®æ¨¡å‹å¯¹æ¯”

#### æ–°å‰ç«¯æ•°æ®æ¨¡å‹ (Card-based)

```typescript
// å±‚çº§ç»“æ„
Project
â”œâ”€â”€ episodes: Episode[]
â”‚   â”œâ”€â”€ storyboard: Storyboard
â”‚   â”‚   â”œâ”€â”€ cards: Card[]        // æ ¸å¿ƒå•å…ƒ
â”‚   â”‚   â””â”€â”€ canvasState: CanvasState
â”‚   â”œâ”€â”€ characters: Character[]
â”‚   â””â”€â”€ scenes: Scene[]

// Card ç±»å‹
type Card = {
  id: string;
  type: 'shot' | 'scene_master' | 'reference';
  position: { x, y };
  size: { width, height };
  imageUrl?: string;
  content: CardContent;
  params: GenerationParams;
  links: CardLinks;
  referenceImages?: { sketch?, material?, threeD? };
}
```

#### V3 æ•°æ®æ¨¡å‹ (Node-based)

```typescript
// é€šç”¨èŠ‚ç‚¹ç³»ç»Ÿ (story_nodes)
story_nodes {
  id: UUID;
  project_id: UUID;
  parent_id: UUID?;           // è‡ªå¼•ç”¨ï¼Œæ”¯æŒæ— é™å±‚çº§
  node_type: 'episode' | 'scene' | 'shot' | 'asset' | ...;
  content: JSONB;             // çµæ´»å†…å®¹
  position: { x, y };
  status: 'pending' | ...;
}
```

#### å·®å¼‚åˆ†æ

| ç»´åº¦ | æ–°å‰ç«¯ (Card) | V3 (story_nodes) | å½±å“ |
|------|---------------|------------------|------|
| **å±‚çº§å…³ç³»** | ä¸¥æ ¼çˆ¶å­ (Projectâ†’Episodeâ†’Card) | é€šç”¨èŠ‚ç‚¹ (parent_id è‡ªå¼•ç”¨) | æ–°å‰ç«¯æ›´ä¸¥æ ¼ï¼ŒV3 æ›´çµæ´» |
| **å¡ç‰‡ç±»å‹** | shot / scene_master / reference | é€šè¿‡ node_type åŠ¨æ€å®šä¹‰ | V3 æ›´æ˜“æ‰©å±• |
| **è¿çº¿ç³»ç»Ÿ** | Connection å¯¹è±¡ | å¯èƒ½é€šè¿‡ node_relationships | éœ€è¦ç»Ÿä¸€ |
| **ä½ç½®å­˜å‚¨** | Card.position | layout JSONB | éœ€è¦é€‚é… |
| **å‚è€ƒå›¾** | Card.referenceImages (3ç±»å‹) | asset_manifest | æ–°å‰ç«¯æ›´ç»†è‡´ |

**å»ºè®®æ–¹æ¡ˆ**:
1. **æ•°æ®åº“å±‚**: ä¿ç•™ V3 çš„ `story_nodes` (å·²ä»£ç å®ç° 85%)
2. **API é€‚é…å±‚**: æ–°å¢ Card â†” Node è½¬æ¢å±‚
3. **å‰ç«¯é€‚é…**: æ–°å‰ç«¯ä½¿ç”¨ Card ç±»å‹ï¼Œè°ƒç”¨è½¬æ¢å±‚ API

### 3. åŠŸèƒ½æ¨¡å—è¯¦ç»†å¯¹æ¯”

#### 3.1 å·¥ä½œå° (HomePage)

| åŠŸèƒ½ | æ–°å‰ç«¯ | V3 | åç«¯ç¼ºå£ |
|------|--------|-----|----------|
| åˆ›æ„è¾“å…¥æ¡† | âœ… 500å­— + æé€Ÿæ¨¡å¼ | âœ… æé€Ÿæ¨¡å¼ | æ—  |
| é¡¹ç›®åˆ—è¡¨ | âœ… å¡ç‰‡å±•ç¤º | âœ… ProjectCard | æ—  |
| æ–°å»ºé¡¹ç›® | âœ… + æŒ‰é’® | âœ… | æ—  |
| å¿«æ·å…¥å£ | âœ… å¿«é€Ÿå…¥é—¨/å‰§æœ¬å·¥åŠ | âœ… 5ä¸ªå¿«æ·å›¾æ ‡ | æ—  |
| **å…¨å±€æœç´¢** | âŒ æ—  | âœ… Header æœç´¢ | éœ€å®ç° |
| **é€šçŸ¥ç³»ç»Ÿ** | âŒ æ—  | âœ… Header é€šçŸ¥ | éœ€å®ç° |
| **ç§¯åˆ†/ä½™é¢** | âœ… user.balance | âœ… Header æ˜¾ç¤º | éœ€ User API |

**åç«¯ API éœ€æ±‚**:
```
GET  /api/projects          - é¡¹ç›®åˆ—è¡¨
POST /api/projects          - åˆ›å»ºé¡¹ç›®
GET  /api/user/profile      - ç”¨æˆ·ä¿¡æ¯ (å« balance)
```

#### 3.2 é¡¹ç›®ç¼–è¾‘å™¨ (ProjectPage)

| åŠŸèƒ½ | æ–°å‰ç«¯ | V3 | åç«¯ç¼ºå£ |
|------|--------|-----|----------|
| **å‰§æœ¬å·¥åŠ** | âœ… ScriptWorkshopModal | âœ… å‰§æœ¬æå–å¼•æ“ | éœ€å®Œæ•´å‰§æœ¬ API |
| **æ‰¹é‡ç”Ÿæˆ** | âœ… BatchGenerateModal | âœ… åˆ†é•œç”Ÿå›¾ | éœ€æ‰¹é‡ä»»åŠ¡ API |
| **å¯¼å‡º** | âœ… æŒ‰é’®å ä½ | âœ… å¤šæ ¼å¼å¯¼å‡º | éœ€å¯¼å‡º API |
| **åå°ç®¡ç†** | âœ… BackstageModal | âŒ V3 æ—  | **æ–°åŠŸèƒ½** |

**åç«¯ API éœ€æ±‚**:
```
# å‰§æœ¬å·¥åŠ
GET    /api/episodes/:id/script
PUT    /api/episodes/:id/script
POST   /api/episodes/:id/split          # æ™ºèƒ½åˆ†é›†

# æ‰¹é‡ç”Ÿæˆ
POST   /api/batch/generate              # æäº¤æ‰¹é‡ä»»åŠ¡
GET    /api/batch/tasks/:id/status      # æŸ¥è¯¢è¿›åº¦
WebSocket /ws/batch/:id/progress       # å®æ—¶è¿›åº¦

# å¯¼å‡º
POST   /api/projects/:id/export         # å¯¼å‡ºé¡¹ç›®
GET    /api/exports/:id/download        # ä¸‹è½½æ–‡ä»¶
```

#### 3.3 åˆ†é•œç”»å¸ƒ (Canvas)

| åŠŸèƒ½ | æ–°å‰ç«¯ | V3 | åç«¯ç¼ºå£ |
|------|--------|-----|----------|
| **æ— é™ç”»å¸ƒ** | âœ… StoryboardCanvas | âœ… CanvasArea | æ—  |
| **é•œå¤´å¡ç‰‡** | âœ… ShotCard | âœ… ShotCard | æ—  |
| **Scene Master** | âœ… 25æ ¼æ€»è§ˆ | âœ… 25æ ¼åˆ†é•œ | æ—  |
| **æ‹–æ‹½æ’åº** | âœ… | âœ… | æ—  |
| **è¿çº¿ç³»ç»Ÿ** | âœ… ConnectionLines | âœ… | éœ€ Connection API |
| **å³é”®èœå•** | âœ… ContextMenu | âœ… | æ—  |
| **å¤šé€‰/å¤åˆ¶** | âœ… useCanvasStore | âœ… | æ—  |
| **ç”»å¸ƒç¼©æ”¾** | âœ… zoom 0.1-5 | âœ… 10%-500% | æ—  |

**åç«¯ API éœ€æ±‚**:
```
# ç”»å¸ƒçŠ¶æ€
GET    /api/storyboards/:id/canvas      # è·å–ç”»å¸ƒçŠ¶æ€
PUT    /api/storyboards/:id/canvas      # æ›´æ–°ç”»å¸ƒçŠ¶æ€

# å¡ç‰‡ CRUD
POST   /api/cards                       # åˆ›å»ºå¡ç‰‡
PUT    /api/cards/:id                   # æ›´æ–°å¡ç‰‡
DELETE /api/cards/:id                   # åˆ é™¤å¡ç‰‡
PUT    /api/cards/:id/position          # æ›´æ–°ä½ç½®

# è¿çº¿
POST   /api/connections                 # åˆ›å»ºè¿çº¿
DELETE /api/connections/:id             # åˆ é™¤è¿çº¿
```

#### 3.4 AI ç”Ÿå›¾åŠŸèƒ½ (æ ¸å¿ƒå·®å¼‚ âš ï¸)

| åŠŸèƒ½ | æ–°å‰ç«¯ | V3 | åç«¯ç¼ºå£ | ä¼˜å…ˆçº§ |
|------|--------|-----|----------|--------|
| **å•å¼ ç”Ÿæˆ** | âœ… Card çº§åˆ« | âœ… | æ—  | P0 |
| **æ‰¹é‡ç”Ÿæˆ** | âœ… BatchGenerateModal | âœ… | éœ€é˜Ÿåˆ—ç³»ç»Ÿ | P0 |
| **25æ ¼åˆ†é•œ** | âœ… SceneMasterCard | âœ… | æ—  | P0 |
| **å±€éƒ¨é‡ç»˜** | âœ… **InpaintModal** | âŒ æ—  | **éœ€å®ç° Inpaint API** | P1 |
| **æ™ºèƒ½æ‰©å›¾** | âœ… **OutpaintModal** | âŒ æ—  | **éœ€å®ç° Outpaint API** | P1 |
| **è™šæ‹Ÿæ‘„åƒæœº** | âœ… **VirtualCameraModal** | âŒ æ—  | **éœ€å®ç° 3D å˜æ¢ API** | P1 |
| **è¿é•œç”Ÿæˆ** | âœ… **CameraMoveModal** | âŒ æ—  | **éœ€å®ç° Video Gen API** | P1 |
| **å‚è€ƒå›¾ç±»å‹** | âœ… 3ç§ (sketch/material/3D) | âŒ æ—  | **éœ€æ‰©å±• Asset API** | P2 |

**åç«¯ API éœ€æ±‚ (é«˜ä¼˜å…ˆçº§)**:
```
# å›¾åƒç¼–è¾‘ (æ–°åŠŸèƒ½)
POST   /api/images/:id/inpaint          # å±€éƒ¨é‡ç»˜
  Body: { maskImage, prompt, brushData }
  
POST   /api/images/:id/outpaint         # æ™ºèƒ½æ‰©å›¾
  Body: { direction, prompt, expandRatio }
  
POST   /api/images/:id/virtual-camera   # è™šæ‹Ÿæ‘„åƒæœº
  Body: { horizontalAngle, verticalAngle, zoom, focalLength, aperture }
  
# è§†é¢‘ç”Ÿæˆ
POST   /api/videos/generate             # å›¾ç”Ÿè§†é¢‘ / è¿é•œ
  Body: { imageUrl, cameraMove, duration }
  
# æ‰¹é‡ä»»åŠ¡é˜Ÿåˆ—
POST   /api/jobs/batch                  # åˆ›å»ºæ‰¹é‡ä»»åŠ¡
GET    /api/jobs/:id                    # æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
POST   /api/jobs/:id/cancel             # å–æ¶ˆä»»åŠ¡
```

#### 3.5 èµ„äº§ç®¡ç† (Asset Management)

| åŠŸèƒ½ | æ–°å‰ç«¯ | V3 | åç«¯ç¼ºå£ |
|------|--------|-----|----------|
| **è§’è‰²åº“** | âœ… Character ç±»å‹ | âœ… Asset Inspector | æ—  |
| **åœºæ™¯åº“** | âœ… Scene ç±»å‹ | âœ… | æ—  |
| **å‚è€ƒå›¾ä¸Šä¼ ** | âœ… Card.referenceImages | âœ… | æ—  |
| **å‚è€ƒå›¾åˆ†ç±»** | âœ… **3ç§ç±»å‹** | âŒ æ— åˆ†ç±» | **éœ€æ‰©å±•** |
| **AI è‡ªåŠ¨æå–** | âœ… "AI è‡ªåŠ¨æå–è§’è‰²/åœºæ™¯" | âœ… Asset Inspector | éœ€æå– API |

**åç«¯ API éœ€æ±‚**:
```
# èµ„äº§æå–
POST   /api/projects/:id/extract-assets    # AI æå–è§’è‰²/åœºæ™¯
GET    /api/projects/:id/characters        # è§’è‰²åˆ—è¡¨
GET    /api/projects/:id/scenes            # åœºæ™¯åˆ—è¡¨

# å‚è€ƒå›¾
POST   /api/cards/:id/reference-images     # ä¸Šä¼ å‚è€ƒå›¾
  Query: type=sketch|material|threeD
```

#### 3.6 AI åŠ©æ‰‹ä¸èŠå¤© (âš ï¸ V3 é¢†å…ˆ)

| åŠŸèƒ½ | æ–°å‰ç«¯ | V3 | åç«¯ç¼ºå£ |
|------|--------|-----|----------|
| **å…¨å±€ AI åŠ©æ‰‹** | âŒ **ç¼ºå¤±** | âœ… 320px/400px ä¾§è¾¹æ  | **éœ€å®Œæ•´å®ç°** |
| **è‡ªç„¶è¯­è¨€äº¤äº’** | âŒ **ç¼ºå¤±** | âœ… Chat Input | **éœ€å®ç°** |
| **SDUI æŒ‰é’®** | âŒ **ç¼ºå¤±** | âœ… Action Block | **éœ€å®ç°** |
| **æµå¼å“åº”** | âŒ **ç¼ºå¤±** | âœ… SSE Stream | **éœ€å®ç°** |
| **å¿«æ·æŒ‡ä»¤** | âŒ **ç¼ºå¤±** | âœ… ç»­å†™/æ‰©å†™/æ¶¦è‰² | **éœ€å®ç°** |
| **æ„å›¾è¯†åˆ«** | âŒ **ç¼ºå¤±** | âœ… Master Router | **éœ€å®ç°** |

**åˆ†æ**: è¿™æ˜¯ V3 çš„æ ¸å¿ƒå·®å¼‚åŒ–åŠŸèƒ½ï¼Œæ–°å‰ç«¯å®Œå…¨ç¼ºå¤±ã€‚å¦‚æœè¦èåˆï¼Œéœ€è¦å®Œæ•´å®ç°åç«¯ AI ç¼–æ’ç³»ç»Ÿã€‚

**åç«¯ API éœ€æ±‚ (å¤§å·¥ç¨‹)**:
```
# AI èŠå¤© (LangGraph)
POST   /api/graph/chat                  # SSE æµå¼èŠå¤©
POST   /api/graph/approve               # Human-in-the-Loop
GET    /api/graph/state                 # è·å–çŠ¶æ€

# Master Router
POST   /api/action                      # SDUI Action å¤„ç†

# å„ Agent API
POST   /api/agents/market-analyst       # å¸‚åœºåˆ†æ
POST   /api/agents/story-planner        # æ•…äº‹è§„åˆ’
POST   /api/agents/skeleton-builder     # éª¨æ¶æ„å»º
POST   /api/agents/novel-writer         # å°è¯´å†™ä½œ
POST   /api/agents/script-adapter       # å‰§æœ¬æå–
POST   /api/agents/storyboard-director  # åˆ†é•œå¯¼æ¼”
```

### 4. çŠ¶æ€ç®¡ç†å¯¹æ¯”

#### æ–°å‰ç«¯ Zustand Stores

```typescript
// 4 ä¸ªç‹¬ç«‹çš„ Store
useAppStore       - ä¸»é¢˜ã€ç”¨æˆ·ã€å½“å‰é¡¹ç›®
useCanvasStore    - ç”»å¸ƒäº¤äº’çŠ¶æ€ (é€‰æ‹©ã€æ‹–æ‹½ã€è¿çº¿)
useUIStore        - UI çŠ¶æ€ (ä¾§è¾¹æ ã€å¼¹çª—ã€Toast)
useProjectStore   - é¡¹ç›®æ•°æ® (CRUD æ“ä½œ)
```

#### V3 è®¾è®¡è§„èŒƒ

```typescript
// Zustand å¤š Store æ¶æ„ (ä¸å‰ç«¯åŸºæœ¬ä¸€è‡´)
useAppStore       - åº”ç”¨çº§çŠ¶æ€
useChatStore      - AI èŠå¤©çŠ¶æ€ (æ–°å‰ç«¯æ— )
useCanvasStore    - ç”»å¸ƒçŠ¶æ€
useProjectStore   - é¡¹ç›®æ•°æ®
```

**å·®å¼‚**: æ–°å‰ç«¯ç¼ºå°‘ `useChatStore`ï¼Œå› ä¸ºç¼ºå°‘ AI åŠ©æ‰‹åŠŸèƒ½ã€‚

---

## ğŸš¨ åç«¯ç¼ºå£æ¸…å• (æŒ‰ä¼˜å…ˆçº§æ’åº)

### P0 - æ ¸å¿ƒåŠŸèƒ½ (å¿…é¡»å®ç°)

| # | åŠŸèƒ½ | API ç«¯ç‚¹ | å¤æ‚åº¦ | é¢„ä¼°å·¥æ—¶ |
|---|------|----------|--------|----------|
| 1 | é¡¹ç›® CRUD | `/api/projects/*` | ä½ | 1d |
| 2 | å‰§é›†ç®¡ç† | `/api/episodes/*` | ä½ | 1d |
| 3 | å¡ç‰‡ CRUD | `/api/cards/*` | ä½ | 2d |
| 4 | ç”»å¸ƒçŠ¶æ€ | `/api/storyboards/*/canvas` | ä½ | 1d |
| 5 | è¿çº¿ç³»ç»Ÿ | `/api/connections/*` | ä½ | 1d |
| 6 | å›¾ç‰‡ç”Ÿæˆ | `/api/images/generate` | ä¸­ | 3d |
| 7 | æ‰¹é‡ä»»åŠ¡é˜Ÿåˆ— | `/api/jobs/batch` + WebSocket | ä¸­ | 3d |

**å°è®¡**: ~12 å¤©

### P1 - é«˜çº§å›¾åƒç¼–è¾‘ (æ–°å‰ç«¯ç‰¹æœ‰)

| # | åŠŸèƒ½ | API ç«¯ç‚¹ | å¤æ‚åº¦ | é¢„ä¼°å·¥æ—¶ |
|---|------|----------|--------|----------|
| 8 | å±€éƒ¨é‡ç»˜ (Inpaint) | `/api/images/*/inpaint` | é«˜ | 5d |
| 9 | æ™ºèƒ½æ‰©å›¾ (Outpaint) | `/api/images/*/outpaint` | é«˜ | 5d |
| 10 | è™šæ‹Ÿæ‘„åƒæœº | `/api/images/*/virtual-camera` | é«˜ | 5d |
| 11 | è¿é•œ/è§†é¢‘ç”Ÿæˆ | `/api/videos/generate` | é«˜ | 5d |
| 12 | å‚è€ƒå›¾ 3 ç±»å‹ | `/api/cards/*/reference-images` | ä¸­ | 2d |

**å°è®¡**: ~22 å¤©

### P2 - AI åŠ©æ‰‹ç³»ç»Ÿ (V3 é¢†å…ˆ)

| # | åŠŸèƒ½ | API ç«¯ç‚¹ | å¤æ‚åº¦ | é¢„ä¼°å·¥æ—¶ |
|---|------|----------|--------|----------|
| 13 | LangGraph ç¼–æ’ | `/api/graph/*` | æé«˜ | 15d |
| 14 | Master Router | `/api/action` | é«˜ | 5d |
| 15 | å„ Agent å®ç° | `/api/agents/*` | é«˜ | 10d |
| 16 | SSE æµå¼ | WebSocket/SSE | ä¸­ | 3d |
| 17 | SDUI åè®® | Action Block å¤„ç† | ä¸­ | 3d |

**å°è®¡**: ~36 å¤©

### P3 - å…¶ä»–åŠŸèƒ½

| # | åŠŸèƒ½ | API ç«¯ç‚¹ | å¤æ‚åº¦ | é¢„ä¼°å·¥æ—¶ |
|---|------|----------|--------|----------|
| 18 | ç”¨æˆ·ç³»ç»Ÿ | `/api/user/*` | ä½ | 2d |
| 19 | èµ„äº§æå– | `/api/projects/*/extract-assets` | ä¸­ | 3d |
| 20 | å¯¼å‡ºåŠŸèƒ½ | `/api/projects/*/export` | ä¸­ | 3d |
| 21 | åå°ç®¡ç† | `/api/admin/*` | ä¸­ | 3d |

**å°è®¡**: ~11 å¤©

### ğŸ“Š æ€»å·¥æ—¶ä¼°ç®—

| ä¼˜å…ˆçº§ | åŠŸèƒ½æ•° | å·¥æ—¶ | è¯´æ˜ |
|--------|--------|------|------|
| P0 | 7 | 12d | åŸºç¡€åŠŸèƒ½ï¼Œå¿…é¡»æœ‰ |
| P1 | 5 | 22d | é«˜çº§å›¾åƒç¼–è¾‘ (æ–°å‰ç«¯ç‰¹è‰²) |
| P2 | 5 | 36d | AI åŠ©æ‰‹ (V3 æ ¸å¿ƒ) |
| P3 | 4 | 11d | å…¶ä»–åŠŸèƒ½ |
| **æ€»è®¡** | **21** | **~82 å¤©** | çº¦ 4 ä¸ªæœˆ (å•åç«¯å·¥ç¨‹å¸ˆ) |

**ä¼˜åŒ–æ–¹æ¡ˆ**:
- å¹¶è¡Œå¼€å‘: P0 + P1 åŒæ—¶è¿›è¡Œ (~34d)
- P2 (AI ç³»ç»Ÿ) å¯ç‹¬ç«‹è¿›è¡Œï¼Œä¸å‰ç«¯åˆ†ç¦»å¼€å‘
- ä½¿ç”¨ç°æœ‰ V3 åç«¯ä½œä¸ºåŸºç¡€ (~85% å·²å®ç°)

---

## ğŸ”„ èåˆå»ºè®®æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: æ¸è¿›å¼èåˆ (æ¨è)

**Phase 1: åŸºç¡€å¯¹é½ (2å‘¨)**
1. ç»Ÿä¸€æ•°æ®æ¨¡å‹ (Card â†” story_nodes è½¬æ¢å±‚)
2. å®ç° P0 åç«¯ API
3. æ–°å‰ç«¯æ¥å…¥ç°æœ‰åç«¯

**Phase 2: åŠŸèƒ½å¢å¼º (4å‘¨)**
1. å®ç° P1 é«˜çº§å›¾åƒç¼–è¾‘ API
2. æ–°å‰ç«¯å®Œæ•´åŠŸèƒ½ä¸Šçº¿
3. æ€§èƒ½ä¼˜åŒ–

**Phase 3: AI ç³»ç»Ÿæ•´åˆ (6å‘¨)**
1. å®ç° P2 AI åŠ©æ‰‹åç«¯
2. æ–°å‰ç«¯æ·»åŠ  Chat ç»„ä»¶
3. SDUI åè®®å¯¹æ¥
4. å®Œæ•´ V3 åŠŸèƒ½ä¸Šçº¿

**ä¼˜åŠ¿**: é£é™©ä½ï¼Œå¯é€æ­¥éªŒè¯
**åŠ£åŠ¿**: å‘¨æœŸé•¿ (~3ä¸ªæœˆ)

### æ–¹æ¡ˆ B: ç›´æ¥æ›¿æ¢ (æ¿€è¿›)

ç›´æ¥é‡‡ç”¨æ–°å‰ç«¯ä½œä¸º UIï¼Œåç«¯å®Œå…¨é‡å†™ã€‚

**ä¼˜åŠ¿**: æŠ€æœ¯æ ˆç»Ÿä¸€
**åŠ£åŠ¿**: 
- ä¸¢å¼ƒ V3 å·²å®ç°çš„ 85% åç«¯ä»£ç 
- å·¥ä½œé‡å¤§ (~4ä¸ªæœˆ)
- é£é™©é«˜

### æ–¹æ¡ˆ C: åŠŸèƒ½è£å‰ª (ä¿å®ˆ)

ä¿ç•™æ–°å‰ç«¯æ ¸å¿ƒåŠŸèƒ½ï¼Œè£å‰ªéœ€è¦å¤§é‡åç«¯å·¥ä½œçš„åŠŸèƒ½ã€‚

**ä¿ç•™**:
- å·¥ä½œå°ã€é¡¹ç›®ç¼–è¾‘å™¨ã€ç”»å¸ƒ (P0)
- Inpaint/Outpaint (å¯å…ˆç”¨å‰ç«¯ Canvas æ¨¡æ‹Ÿ)

**è£å‰ª/å»¶å**:
- Virtual Camera (P1)
- Camera Move/è§†é¢‘ç”Ÿæˆ (P1)
- AI åŠ©æ‰‹ç³»ç»Ÿ (P2)

**ä¼˜åŠ¿**: å¿«é€Ÿä¸Šçº¿ (~1ä¸ªæœˆ)
**åŠ£åŠ¿**: åŠŸèƒ½ä¸å®Œæ•´ï¼Œç«äº‰åŠ›å¼±

---

## ğŸ“‹ ç«‹å³è¡ŒåŠ¨æ¸…å•

### ä»Šå¤©å¯å®Œæˆ

1. âœ… **ç»Ÿä¸€ CSS å˜é‡** - æ–°å‰ç«¯ä¸ V3 è®¾è®¡ç³»ç»Ÿå¯¹é½
2. âœ… **åˆ›å»º API é€‚é…å±‚** - Card â†” Node è½¬æ¢å‡½æ•°
3. âœ… **åˆ¶å®šå¼€å‘è®¡åˆ’** - ç¡®è®¤é‡‡ç”¨æ–¹æ¡ˆ A/B/C

### æœ¬å‘¨å®Œæˆ

1. ğŸ”„ **å®ç° P0 API** (7ä¸ªåŸºç¡€æ¥å£)
2. ğŸ”„ **æ•°æ®è¿ç§»è„šæœ¬** (å¦‚éœ€è¦)
3. ğŸ”„ **æ–°å‰ç«¯æ¥å…¥æµ‹è¯•**

### æœ¬æœˆå®Œæˆ

1. ğŸ¯ **P1 é«˜çº§å›¾åƒç¼–è¾‘** (Inpaint/Outpaint/Virtual Camera)
2. ğŸ¯ **æ–°å‰ç«¯å®Œæ•´åŠŸèƒ½ä¸Šçº¿**

---

## ğŸ¯ å…³é”®å†³ç­–ç‚¹

**éœ€è¦æ‚¨ç¡®è®¤**:

1. **é‡‡ç”¨å“ªç§èåˆæ–¹æ¡ˆï¼Ÿ** (A-æ¸è¿›å¼ / B-ç›´æ¥æ›¿æ¢ / C-åŠŸèƒ½è£å‰ª)
2. **æ˜¯å¦ä¿ç•™ V3 åç«¯ï¼Ÿ** (æ¨èä¿ç•™ï¼Œ85% å·²å®ç°)
3. **AI åŠ©æ‰‹ä¼˜å…ˆçº§ï¼Ÿ** (P0-å¿…é¡»æœ‰ / P1-é‡è¦ / P2-å¯ä»¥å»¶å)
4. **é«˜çº§å›¾åƒç¼–è¾‘ä¼˜å…ˆçº§ï¼Ÿ** (Inpaint/Outpaint/Virtual Camera)
5. **å¼€å‘èµ„æºæŠ•å…¥ï¼Ÿ** (å…¨èŒåç«¯ / å…¼èŒ / å¤–åŒ…)

---

## ğŸ“ é™„ä»¶

- æ–°å‰ç«¯ä»£ç : `/media/martin/HDD2/new-video/new-fronted/`
- V3 è®¾è®¡æ–‡æ¡£: `/media/martin/HDD2/new-video/docs/Frontend-Design-V3.md`
- V3 æ¶æ„æ–‡æ¡£: `/media/martin/HDD2/new-video/docs/System-Architecture-V3.md`
- åç«¯ API ç¼ºå£è¯¦ç»†è®¾è®¡: (å¾…æ ¹æ®å†³ç­–äº§å‡º)

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-02-02
**åˆ†æå¸ˆ**: Sisyphus Agent
**çŠ¶æ€**: âœ… å®Œæˆï¼Œç­‰å¾…å†³ç­–
